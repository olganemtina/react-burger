{"version":3,"sources":["pages/profile-container/profile-container.module.css","components/modal-overlay/modal-overlay.module.css","components/modal/modal.module.css","pages/profile-container/profile-orders/profile-orders.module.scss","components/feed-details/feed-details.module.scss","pages/feed/feed-details/feed-details.module.scss","components/burger-constructor/burger-constructor.module.css","components/burger-ingredients/burger-ingredients.module.css","utils/cookie.ts","utils/api/request-api-helpers.ts","utils/request-api.tsx","services/types/status.ts","utils/api/auth-api.ts","services/action-creators/user.ts","services/action-types/user.ts","components/app-error/app-error.tsx","utils/hooks.ts","pages/login/login.tsx","pages/register/register.tsx","pages/forgot-password/forgot-password.tsx","pages/reset-password/reset-password.tsx","components/app-nav-item/app-nav-item.tsx","pages/profile-container/profile-container.tsx","services/action-types/current-ingredient.ts","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/ingredient-details/ingredient-details.tsx","pages/ingredient/ingredient.tsx","services/action-creators/current-ingredient.ts","pages/profile-container/profile/profile.tsx","utils/class-names.ts","components/app-avatar/app-avatar.tsx","components/app-avatar-list/app-avatar-list.tsx","components/app-price/app-price.tsx","components/feed-item/feed-item.tsx","services/action-types/feed.ts","services/action-creators/feed.ts","services/types/feed.ts","services/hooks/useFeedOrders.ts","services/variables/web-socket.ts","pages/profile-container/profile-orders/profile-orders.tsx","components/app-collection/app-collection.tsx","components/info-card/info-card.tsx","utils/date-extensions.ts","utils/helpers.ts","pages/feed/feed.tsx","components/ingredient-row/ingredient-row.tsx","components/feed-details/feed-details.tsx","pages/feed/feed-details/feed-details.tsx","utils/api/burger-api.ts","services/action-types/burger-ingredients.ts","services/action-creators/burger-ingredients.ts","services/action-types/burger-constructor-ingredients.ts","services/action-types/order.ts","services/action-creators/order.ts","components/burger-constructor-item/burger-constructor-item.tsx","services/action-creators/burger-constructor-ingredients.ts","images/done.svg","components/order-send-notify/order-send-notify.tsx","components/burger-constructor/burger-constructor.tsx","components/burger-ingredient/burger-ingredient.tsx","components/burger-ingredients/burger-ingredients.tsx","components/app-body/app-body.tsx","components/app-header/app-header.tsx","components/app-load/app-load.tsx","components/not-authorized-route/not-authorized-route.tsx","components/protected-route/protected-route.tsx","components/app/app.tsx","reportWebVitals.ts","services/reducers/burger-ingredients.ts","services/reducers/order.ts","services/reducers/burger-constructor-ingredients.ts","services/reducers/user.ts","services/reducers/feed.ts","services/reducers/root-reducer.ts","services/middleware/socketMiddleware.ts","services/reducers/current-ingredient.ts","services/store.ts","index.tsx","components/app-nav-item/app-nav-item.module.css","components/app-avatar-list/app-avatar-list.module.scss","components/app-avatar/app-avatar.module.scss","pages/feed/feed.module.scss"],"names":["module","exports","setCookie","name","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","encodeURIComponent","updatedCookie","propName","propValue","document","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","deleteCookie","useAppDispatch","useDispatch","checkReponseAndGetData","response","ok","json","Promise","reject","status","requestWithBody","url","method","headers","formData","fetch","mode","cache","credentials","redirect","referrerPolicy","body","JSON","stringify","then","catch","data","OrderStatus","requestGet","getUserUrl","loginRequest","requestData","result","refreshToken","accessToken","registerRequest","updateAccessTokenRequest","token","getUserRequest","Authorization","success","message","updateUserRequest","passwordResetStep1Request","passwordResetStep2Request","signOutRequest","setUserAction","type","SET_USER_REQUEST","user","error","getUserRequestAction","GET_USER_REQUEST","CLEAR_USER","getUser","dispatch","getFetchUser","resultData","updateUser","signIn","AppError","className","useSelector","selectorHook","LoginPage","state","useState","email","password","setFormData","formSended","setFormSended","setValue","evt","target","login","useCallback","e","preventDefault","loaded","onSubmit","placeholder","onChange","errorText","size","htmlType","to","RegisterPage","registerClickHandler","signUp","ForgotPasswordPage","history","useHistory","setEmail","errorMsg","setErrorMsg","restoreHandler","pathname","from","ResetPasswordPage","location","AppNavItem","active","path","text","children","exact","activeClassName","style","a_href","a_href_span","ProfileContainerPage","logoutHandler","width_30_percent","onClick","SET_CURRENT_INGREDIENT","ModalOverlay","onClose","modal_overlay","Modal","header","escapeHandler","useEffect","addEventListener","removeEventListener","onCloseClick","currentTarget","closest","key","createPortal","modal_container","IngredientDetails","image_large","calories","proteins","fat","carbohydrates","src","IngredientPage","params","useRouteMatch","isModal","ingredients","items","buns","currentIngredient","handleCloseModal","id","ingredient","find","x","_id","item","ProfilePage","inputsDisabled","setInputDisabled","formChanged","setFormChanged","inputNameRef","useRef","inputEmailRef","inputPasswordRef","onIconClick","inputName","newState","Object","entries","reduce","newObj","current","focus","saveHandler","cancelHandler","icon","ref","disabled","OrderStatusLabel","Map","done","pending","created","classNames","args","map","arg","toString","filter","Boolean","join","AppAvatar","imgUrl","avatar","text_bg","backgroundImage","AppAvatarList","showCount","splicedIngredientsData","useMemo","length","splice","reverse","restCountIngredientsData","avatars_list","avatar_container","image_mobile","index","AppDataWithCurrency","FeedItem","order","showStatus","openModal","openModalHandler","statusClassName","number","howDaysAgo","statusCaption","ingredientsData","totalPrice","WS_FEED_CONNECTION_START","WS_FEED_SEND_MESSAGE","WS_FEED_CONNECTION_SUCCESS","WS_FEED_CONNECTION_CLOSED","WS_FEED_CONNECTION_ERROR","WS_FEED_GET_MESSAGE","startConnectionAction","closeFeedConnectionAction","payload","FeedItemWithIngredients","createdAt","updatedAt","this","sum","price","get","createdAtDate","getHowMuchDaysAgo","allIngredients","allIngredientsMap","acc","set","useFeedOrders","getReducerState","feed","orders","setIngredients","total","totalToday","ordersAllWsUrl","ordersUserWsUrl","wsActionsFeed","wsInit","onOpen","onMessage","onError","wsSendMessage","ProfileOrdersPage","useLocation","ordersDesc","sort","a","b","push","scroll_container","AppCollection","caption","itemCountInRow","cssClass","rowCount","Math","ceil","Array","keys","row","start","finish","partItems","slice","InfoCard","count","prototype","now","diff","round","time","getHours","getMinutes","FeedPage","doneOrders","pendingOrders","uuidv4","IngredientRaw","thumbnail","FeedDetails","refScroll","refNotScroll","offsetHeight","window","innerHeight","setAttribute","removeAttribute","FeedDetailsPage","model","setModel","connected","split","wsUrl","orderWithIngredients","feed_details_container","setOrderData","ids","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","getIngredients","err","ADD_BURGER_INGREDIENT_IN_CONSTRUCTOR","UPDATE_BURGER_BUN_IN_CONSTRUCTOR","REMOVE_BURGER_INGREDIENT_FROM_CONSTRUCTOR","CLEAR_BURGER_INGREDIENTS_FROM_CONSTRUCTOR","SET_ORDER_BURGER_INGREDIENTS_CONSTRUCTOR","SET_ORDER_REQUEST","SET_ORDER_SUCCESS","SET_ORDER_FAILED","setOrder","setOrderRequestAction","setOrderSuccessAction","setOrderFailedAction","orderNumber","BurgerConstructorItem","item_key","draggable","moveItem","useDrop","accept","hover","monitor","dragIndex","dropIndex","drop","useDrag","collect","isDragging","drag","display","alignItems","gap","handleClose","removeBurgerIngredientFromConstructorAction","OrderSendNotify","orderRequestFailed","orderRequest","doneImg","errorMessage","BurgerConstructor","burgerConstructorIngredients","bun","bunTop","bunBottom","burgerIngredients","modalVisibility","setModalVisibility","addBurgerIngredientToConstructorAction","currentBun","updateBurgerIngredientToConstructorAction","dropTarget","handleOpenModal","burgerBunsPrice","moveItemHandler","setOrderBurgerIngredientsAction","BurgerIngredient","imgSrc","description","dragRef","alt","getCaption","BurgerIngredients","setCurrent","ingredientsWithBuns","groupedIngredients","sauce","main","handleScroll","scrollTop","range","minHeight","maxHeight","refBun","clientHeight","every","currentRef","getRef","refMain","refSauce","goToBlock","scrollIntoView","behavior","onScroll","i","flex","image","AppBody","DndProvider","backend","HTML5Backend","AppHeader","AppLoad","RouteForUnauthorizedUsers","rest","render","ProtectedRoute","App","ingredientsRequestFailed","ingredientsRequest","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialIngredientsState","initialOrderState","initialBurgerConstructorIngredientsState","initialUserState","initalFeedState","wsActions","rootReducer","combineReducers","action","droppedItem","draggedItem","newItems","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","socket","socketOpened","getState","next","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","setOrdersAction","onclose","reason","console","log","send","close","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6364c370.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"width_30_percent\":\"profile-container_width_30_percent__26goi\",\"active\":\"profile-container_active__gPOPL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_overlay\":\"modal-overlay_modal_overlay__2hps2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_container\":\"modal_modal_container__3wlZi\",\"scroll_container\":\"modal_scroll_container__107A9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll_container\":\"profile-orders_scroll_container__1VI5B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll_container\":\"feed-details_scroll_container__37jGn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed_details_container\":\"feed-details_feed_details_container__aTRc9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll_container\":\"burger-constructor_scroll_container__3WfN_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll_container\":\"burger-ingredients_scroll_container__1Nb63\"};","export function setCookie(\r\n\tname: string,\r\n\tvalue: string | null,\r\n\tprops: { [name: string]: any } = {}\r\n) {\r\n\tprops = props || {};\r\n\tlet exp = props.expires;\r\n\tif (typeof exp == \"number\" && exp) {\r\n\t\tconst d = new Date();\r\n\t\td.setTime(d.getTime() + exp * 1000);\r\n\t\texp = props.expires = d;\r\n\t}\r\n\tif (exp && exp.toUTCString) {\r\n\t\tprops.expires = exp.toUTCString();\r\n\t}\r\n\tif (value) {\r\n\t\tvalue = encodeURIComponent(value);\r\n\t}\r\n\tlet updatedCookie = name + \"=\" + value;\r\n\tfor (const propName in props) {\r\n\t\tupdatedCookie += \"; \" + propName;\r\n\t\tconst propValue = props[propName];\r\n\t\tif (propValue !== true) {\r\n\t\t\tupdatedCookie += \"=\" + propValue;\r\n\t\t}\r\n\t}\r\n\tdocument.cookie = updatedCookie;\r\n}\r\n\r\nexport function getCookie(name: string) {\r\n\tconst matches = document.cookie.match(\r\n\t\tnew RegExp(\r\n\t\t\t\"(?:^|; )\" +\r\n\t\t\t\tname.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\r\n\t\t\t\t\"=([^;]*)\"\r\n\t\t)\r\n\t);\r\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport function deleteCookie(name: string) {\r\n\tsetCookie(name, null, { expires: -1 });\r\n}\r\n","import { useDispatch } from \"react-redux\";\r\n\r\nexport const useAppDispatch: () => any = useDispatch;\r\n\r\nexport function checkReponseAndGetData(response: Response) {\r\n\treturn response.ok ? response.json() : Promise.reject(response.status);\r\n}\r\n","import { IRequestData } from \"../services/types/fetch\";\r\nimport { checkReponseAndGetData } from \"./api/request-api-helpers\";\r\n\r\nexport async function requestWithBody<T>({url, method, headers, formData}: IRequestData<T>) {\r\n\treturn await fetch(url, { \r\n\t\tmethod: method,\r\n\t\tmode: \"cors\",\r\n\t\tcache: \"no-cache\",\r\n\t\tcredentials: \"same-origin\",\r\n\t\theaders: headers,\r\n\t\tredirect: \"follow\",\r\n\t\treferrerPolicy: \"no-referrer\",\r\n\t\tbody: JSON.stringify(formData),\r\n\t})\r\n\t\t.then((response: Response) => {\r\n\t\t\treturn checkReponseAndGetData(response);\r\n\t\t})\r\n\t\t.catch((data) => {\r\n\t\t\treturn data;\r\n\t\t});\r\n};\r\n\r\n\r\n\r\nexport const requestGet = async (url: string, headers: Record<string, string>) => {\r\n\treturn await fetch(url, {\r\n\t\tmethod: \"GET\",\r\n\t\tmode: \"cors\",\r\n\t\tcache: \"no-cache\",\r\n\t\tcredentials: \"same-origin\",\r\n\t\theaders: headers,\r\n\t\tredirect: \"follow\",\r\n\t\treferrerPolicy: \"no-referrer\",\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\treturn checkReponseAndGetData(response);\r\n\t\t})\r\n\t\t.catch((data) => {\r\n\t\t\treturn data;\r\n\t\t});\r\n};","export enum OrderStatus {\r\n\tdone = \"done\",\r\n\tpending = \"pending\",\r\n\tcreated = \"created\"\r\n}\r\n\r\nexport const OrderStatusLabel = new Map<string, string>([\r\n\t[OrderStatus.done, 'Выполнен'],\r\n\t[OrderStatus.pending, 'Готовится'],\r\n\t[OrderStatus.created, 'Создан']\r\n  ]);\r\n\r\n","import {\r\n\tILoginFormData,\r\n\tIUserData,\r\n\tIRegisterFormData,\r\n\tIResetFormData,\r\n} from \"../../services/types/auth\";\r\nimport { IRequestData, IResponseUserData } from \"../../services/types/fetch\";\r\nimport { deleteCookie, getCookie, setCookie } from \"../cookie\";\r\nimport { requestGet, requestWithBody } from \"../request-api\";\r\n\r\nexport const loginUrl = \"https://norma.nomoreparties.space/api/auth/login\";\r\nexport const registerUrl =\r\n\t\"https://norma.nomoreparties.space/api/auth/register\";\r\nexport const getUserUrl = \"https://norma.nomoreparties.space/api/auth/user\";\r\nexport const passwordResetStep1Url =\r\n\t\"https://norma.nomoreparties.space/api/password-reset\";\r\nexport const passwordResetStep2Url =\r\n\t\"https://norma.nomoreparties.space/api/password-reset/reset\";\r\nexport const signOutUrl = \"https://norma.nomoreparties.space/api/auth/logout\";\r\nexport const updateAccessTokenUrl =\r\n\t\"https://norma.nomoreparties.space/api/auth/token\";\r\n\r\nexport const loginRequest = async (formData: ILoginFormData) => {\r\n\tconst requestData: IRequestData<ILoginFormData> = {\r\n\t\turl: loginUrl,\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t},\r\n\t\tformData,\r\n\t};\r\n\treturn await requestWithBody(requestData).then(\r\n\t\t(result: IResponseUserData<IUserData>) => {\r\n\t\t\tsetCookie(\"refreshToken\", result.refreshToken);\r\n\t\t\tsetCookie(\"accessToken\", result.accessToken);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t);\r\n};\r\n\r\nexport const registerRequest = async (formData: IRegisterFormData) => {\r\n\tconst requestData: IRequestData<ILoginFormData> = {\r\n\t\turl: registerUrl,\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t},\r\n\t\tformData,\r\n\t};\r\n\treturn await requestWithBody(requestData).then(\r\n\t\t(result: IResponseUserData<IUserData>) => {\r\n\t\t\tsetCookie(\"refreshToken\", result.refreshToken);\r\n\t\t\tsetCookie(\"accessToken\", result.accessToken);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t);\r\n};\r\n\r\nexport const updateAccessTokenRequest = async () => {\r\n\tconst requestData: IRequestData<{ token: string | undefined }> = {\r\n\t\turl: updateAccessTokenUrl,\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t},\r\n\t\tformData: {\r\n\t\t\ttoken: getCookie(\"refreshToken\"),\r\n\t\t},\r\n\t};\r\n\treturn await requestWithBody(requestData).then(\r\n\t\t(result: IResponseUserData) => {\r\n\t\t\tsetCookie(\"refreshToken\", result.refreshToken);\r\n\t\t\tsetCookie(\"accessToken\", result.accessToken);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t);\r\n};\r\n\r\nexport const getUserRequest = async () => {\r\n\treturn await requestGet(getUserUrl, {\r\n\t\t\"Content-Type\": \"application/json\",\r\n\t\tAuthorization: getCookie(\"accessToken\") || \"\",\r\n\t}).then(async (result: IResponseUserData<IUserData>) => {\r\n\t\tif (!result.success && result.message === \"jwt expired\") {\r\n\t\t\tawait updateAccessTokenRequest();\r\n\t\t\treturn requestGet(getUserUrl, {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAuthorization: getCookie(\"accessToken\") || \"\",\r\n\t\t\t}).then((result: IResponseUserData<IUserData>) => {\r\n\t\t\t\treturn result;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const updateUserRequest = async (formData: IRegisterFormData) => {\r\n\tconst requestData: IRequestData<IRegisterFormData> = {\r\n\t\turl: getUserUrl,\r\n\t\tmethod: \"PATCH\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\tAuthorization: getCookie(\"accessToken\") || \"\",\r\n\t\t},\r\n\t\tformData,\r\n\t};\r\n\treturn await requestWithBody(requestData).then(\r\n\t\tasync (result: IResponseUserData<IUserData>) => {\r\n\t\t\tif (!result.success && result.message === \"jwt expired\") {\r\n\t\t\t\tupdateAccessTokenRequest();\r\n\t\t\t\treturn requestGet(getUserUrl, {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\tAuthorization: getCookie(\"accessToken\") || \"\",\r\n\t\t\t\t}).then((result: IResponseUserData<IUserData>) => {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n};\r\n\r\nexport const passwordResetStep1Request = async (formData: {\r\n\temail: string;\r\n}) => {\r\n\tconst requestData: IRequestData<{ email: string }> = {\r\n\t\turl: passwordResetStep1Url,\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t},\r\n\t\tformData,\r\n\t};\r\n\r\n\treturn await requestWithBody(requestData).then((result) => {\r\n\t\treturn result;\r\n\t});\r\n};\r\n\r\nexport const passwordResetStep2Request = async (formData: IResetFormData) => {\r\n\tconst requestData: IRequestData<IResetFormData> = {\r\n\t\turl: passwordResetStep2Url,\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t},\r\n\t\tformData: formData,\r\n\t};\r\n\treturn await requestWithBody(requestData).then((data) => {\r\n\t\treturn data;\r\n\t});\r\n};\r\n\r\nexport const signOutRequest = async () => {\r\n\tconst requestData: IRequestData<{ token: string | undefined }> = {\r\n\t\turl: signOutUrl,\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t},\r\n\t\tformData: {\r\n\t\t\ttoken: getCookie(\"refreshToken\"),\r\n\t\t},\r\n\t};\r\n\treturn await requestWithBody(requestData).then((data) => {\r\n\t\tdeleteCookie(\"refreshToken\");\r\n\t\tdeleteCookie(\"accessToken\");\r\n\t\treturn data;\r\n\t});\r\n};\r\n","import {\r\n\tCLEAR_USER,\r\n\tGET_USER_REQUEST,\r\n\tSET_USER_REQUEST,\r\n} from \"../action-types/user\";\r\nimport { IUserData } from \"../types/auth\";\r\n\r\nexport interface ISetUserAction {\r\n\ttype: typeof SET_USER_REQUEST;\r\n\tuser?: IUserData;\r\n\terror?: string;\r\n}\r\n\r\nexport interface IClearUserAction {\r\n\ttype: typeof CLEAR_USER;\r\n}\r\n\r\nexport interface IGetUserRequestAction {\r\n\ttype: typeof GET_USER_REQUEST;\r\n}\r\n\r\nexport type TUserAction =\r\n\t| ISetUserAction\r\n\t| IClearUserAction\r\n\t| IGetUserRequestAction;\r\n\r\nexport const setUserAction = (data: {\r\n\terror?: string;\r\n\tuser?: IUserData;\r\n}): ISetUserAction => {\r\n\treturn {\r\n\t\ttype: SET_USER_REQUEST,\r\n\t\tuser: data.user,\r\n\t\terror: data.error,\r\n\t};\r\n};\r\n\r\nexport const clearUser = (): IClearUserAction => {\r\n\treturn {\r\n\t\ttype: CLEAR_USER,\r\n\t};\r\n};\r\n\r\nexport const getUserRequestAction = () => {\r\n\treturn {\r\n\t\ttype: GET_USER_REQUEST,\r\n\t};\r\n};\r\n","import {\r\n\tgetUserRequest as getFetchUser,\r\n\tloginRequest,\r\n\tregisterRequest,\r\n\tsignOutRequest,\r\n\tupdateUserRequest,\r\n} from \"../../utils/api/auth-api\";\r\nimport {\r\n\tclearUser,\r\n\tgetUserRequestAction,\r\n\tsetUserAction,\r\n} from \"../action-creators/user\";\r\nimport { AppDispatch, AppThunk } from \"../types\";\r\nimport { ILoginFormData, IRegisterFormData } from \"../types/auth\";\r\n\r\nexport const SET_USER_REQUEST: \"SET_USER_REQUEST\" = \"SET_USER_REQUEST\";\r\nexport const CLEAR_USER: \"CLEAR_USER\" = \"CLEAR_USER\";\r\nexport const GET_USER_REQUEST: \"GET_USER_REQUEST\" = \"GET_USER_REQUEST\";\r\n\r\nexport const getUser: AppThunk = () => async (dispatch: AppDispatch) => {\r\n\tdispatch(getUserRequestAction());\r\n\tconst resultData = await getFetchUser();\r\n\tif (resultData.success) {\r\n\t\tdispatch(setUserAction({ user: resultData.user }));\r\n\t} else {\r\n\t\tdispatch(setUserAction({ error: resultData.message }));\r\n\t}\r\n};\r\n\r\nexport const updateUser: AppThunk =\r\n\t(formData: IRegisterFormData) => async (dispatch: AppDispatch) => {\r\n\t\tdispatch(getUserRequestAction());\r\n\t\tconst resultData = await updateUserRequest(formData);\r\n\t\tif (resultData.success) {\r\n\t\t\tdispatch(setUserAction({ user: resultData.user }));\r\n\t\t} else {\r\n\t\t\tdispatch(setUserAction({ error: resultData.message }));\r\n\t\t}\r\n\t};\r\n\r\nexport const signIn: AppThunk =\r\n\t(formData: ILoginFormData) => async (dispatch: AppDispatch) => {\r\n\t\tdispatch(getUserRequestAction());\r\n\t\tconst resultData = await loginRequest(formData);\r\n\t\tif (resultData.success) {\r\n\t\t\tdispatch(setUserAction({ user: resultData.user }));\r\n\t\t} else {\r\n\t\t\tdispatch(setUserAction({ error: resultData.message }));\r\n\t\t}\r\n\t};\r\n\r\nexport const signUp: AppThunk =\r\n\t(formData: IRegisterFormData) => async (dispatch: AppDispatch) => {\r\n\t\tdispatch(getUserRequestAction());\r\n\t\tconst resultData = await registerRequest(formData);\r\n\t\tif (resultData.success) {\r\n\t\t\tdispatch(setUserAction({ user: resultData.user }));\r\n\t\t} else {\r\n\t\t\tdispatch(setUserAction({ error: resultData.message }));\r\n\t\t}\r\n\t};\r\n\r\nexport const signOut: AppThunk = () => async (dispatch: AppDispatch) => {\r\n\tconst resultData = await signOutRequest();\r\n\tif (resultData.success) {\r\n\t\tdispatch(clearUser());\r\n\t} else {\r\n\t\tdispatch(setUserAction({ error: resultData.message }));\r\n\t}\r\n};\r\n","import { FC } from \"react\";\r\n\r\nexport const AppError: FC<{ error: string }> = ({ error }) => {\r\n\treturn (\r\n\t\t<h1 className=\"text text_type_main-small mt-4 text_color_inactive\">\r\n\t\t\t{error}\r\n\t\t</h1>\r\n\t);\r\n};\r\n","import { TypedUseSelectorHook, useSelector as selectorHook } from 'react-redux';\r\nimport { RootState } from '../services/types';\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook; ","import {\r\n\tButton,\r\n\tInput,\r\n\tPasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { SyntheticEvent, useCallback, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { NavLink, Redirect } from \"react-router-dom\";\r\nimport { signIn } from \"../../services/action-types/user\";\r\nimport { AppError } from \"../../components/app-error/app-error\";\r\nimport { ILoginFormData } from \"../../services/types/auth\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nexport const LoginPage = () => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst user = useSelector((state) => {\r\n\t\treturn state.user;\r\n\t});\r\n\r\n\tconst [formData, setFormData] = useState<ILoginFormData>({\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t});\r\n\r\n\tconst [formSended, setFormSended] = useState(false);\r\n\r\n\tconst setValue = (evt: SyntheticEvent<HTMLInputElement>) => {\r\n\t\tconst { name, value } = evt.target as HTMLInputElement;\r\n\t\tsetFormData({\r\n\t\t\t...formData,\r\n\t\t\t[name]: value,\r\n\t\t});\r\n\t};\r\n\r\n\tconst login = useCallback(\r\n\t\tasync (e: SyntheticEvent<HTMLFormElement>) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tdispatch(signIn(formData));\r\n\t\t\tsetFormSended(true);\r\n\t\t},\r\n\t\t[formData]\r\n\t);\r\n\r\n\tif (!user.loaded) {\r\n\t\treturn <Redirect to=\"/\" />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`display_flex display_flex-center text_align_center vh-100`}\r\n\t\t>\r\n\t\t\t<form onSubmit={(e) => login(e)}>\r\n\t\t\t\t<h1 className=\"text text_type_main-medium\">Вход</h1>\r\n\t\t\t\t{formSended && user.error && (\r\n\t\t\t\t\t<AppError error={user.error} />\r\n\t\t\t\t)}\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\ttype={\"text\"}\r\n\t\t\t\t\t\tplaceholder={\"E-mail\"}\r\n\t\t\t\t\t\tonChange={(e) => setValue(e)}\r\n\t\t\t\t\t\tvalue={formData.email}\r\n\t\t\t\t\t\tname={\"email\"}\r\n\t\t\t\t\t\terror={false}\r\n\t\t\t\t\t\terrorText={\"E-mail invalid\"}\r\n\t\t\t\t\t\tsize={\"default\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<PasswordInput\r\n\t\t\t\t\t\tonChange={(e) => setValue(e)}\r\n\t\t\t\t\t\tvalue={formData.password}\r\n\t\t\t\t\t\tname={\"password\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Button htmlType=\"submit\" type=\"primary\" size=\"medium\">\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-20\">\r\n\t\t\t\t\t<span className=\"text text_type_main-default text_color_inactive\">\r\n\t\t\t\t\t\tВы — новый пользователь?{\" \"}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tclassName=\"text text_type_main-default text_color_inactive nav_link\"\r\n\t\t\t\t\t\t\tto=\"/register\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-4\">\r\n\t\t\t\t\t<span className=\"text text_type_main-default text_color_inactive\">\r\n\t\t\t\t\t\tЗабыли пароль?{\" \"}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tclassName=\"text text_type_main-default text_color_inactive nav_link\"\r\n\t\t\t\t\t\t\tto=\"/forgot-password\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tВосстановить пароль\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import {\r\n\tButton,\r\n\tInput,\r\n\tPasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { SyntheticEvent, useCallback, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { NavLink, Redirect } from \"react-router-dom\";\r\nimport { AppError } from \"../../components/app-error/app-error\";\r\nimport { signUp } from \"../../services/action-types/user\";\r\nimport { IRegisterFormData } from \"../../services/types/auth\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nexport const RegisterPage = () => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst [formSended, setFormSended] = useState(false);\r\n\r\n\tconst [formData, setFormData] = useState<IRegisterFormData>({\r\n\t\tname: \"\",\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t});\r\n\r\n\tconst user = useSelector((state) => {\r\n\t\treturn state.user;\r\n\t});\r\n\r\n\tconst registerClickHandler = useCallback(\r\n\t\t(e: SyntheticEvent<HTMLFormElement>) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tdispatch(signUp(formData));\r\n\t\t\tsetFormSended(true);\r\n\t\t},\r\n\t\t[formData]\r\n\t);\r\n\r\n\tconst setValue = (e: SyntheticEvent<HTMLInputElement>) => {\r\n\t\tconst { name, value } = e.target as HTMLInputElement;\r\n\t\tsetFormData({\r\n\t\t\t...formData,\r\n\t\t\t[name]: value,\r\n\t\t});\r\n\t};\r\n\r\n\tif (!user.loaded) {\r\n\t\treturn <Redirect to=\"/\" />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`display_flex display_flex-center text_align_center vh-100`}\r\n\t\t>\r\n\t\t\t<form onSubmit={(e) => registerClickHandler(e)}>\r\n\t\t\t\t<h1 className=\"text text_type_main-medium\">Регистрация</h1>\r\n\t\t\t\t{formSended && user.error && (\r\n\t\t\t\t\t<AppError error={user.error} />\r\n\t\t\t\t)}\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\ttype={\"text\"}\r\n\t\t\t\t\t\tplaceholder={\"Имя\"}\r\n\t\t\t\t\t\tonChange={(e) => setValue(e)}\r\n\t\t\t\t\t\tvalue={formData.name}\r\n\t\t\t\t\t\tname={\"name\"}\r\n\t\t\t\t\t\tsize={\"default\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\ttype={\"text\"}\r\n\t\t\t\t\t\tplaceholder={\"E-mail\"}\r\n\t\t\t\t\t\tonChange={(e) => setValue(e)}\r\n\t\t\t\t\t\tvalue={formData.email}\r\n\t\t\t\t\t\tname={\"email\"}\r\n\t\t\t\t\t\tsize={\"default\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<PasswordInput\r\n\t\t\t\t\t\tonChange={(e) => setValue(e)}\r\n\t\t\t\t\t\tvalue={formData.password}\r\n\t\t\t\t\t\tname={\"password\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t<Button htmlType=\"submit\" type=\"primary\" size=\"medium\">\r\n\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-20\">\r\n\t\t\t\t\t<span className=\"text text_type_main-default text_color_inactive\">\r\n\t\t\t\t\t\tУже зарегистрированы?{\" \"}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tclassName=\"text text_type_main-default text_color_inactive nav_link\"\r\n\t\t\t\t\t\t\tto=\"/login\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tВойти\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useCallback, useState } from 'react';\r\nimport {AppError} from '../../components/app-error/app-error';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\nimport { passwordResetStep1Request } from '../../utils/api/auth-api';\r\n\r\nexport const ForgotPasswordPage = () => {\r\n\tconst history = useHistory();\r\n\tconst [email, setEmail] = useState<string>(\"\");\r\n\tconst [errorMsg, setErrorMsg] = useState<string>();\r\n\r\n\tconst restoreHandler = useCallback(async(e: React.FormEvent<HTMLFormElement>)=>{\r\n\t\te.preventDefault();\r\n\t\tconst result = await passwordResetStep1Request({\r\n\t\t\t\"email\": email\r\n\t\t})\r\n\t\tif(result.success)\r\n\t\t{\r\n\t\t\thistory.replace({pathname: \"/reset-password\", state:{from: \"/forgot-password\"}});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tsetErrorMsg(result.message);\r\n\t\t}\r\n\t}, [email]);\r\n\treturn(\r\n\t\t<div className={`display_flex display_flex-center text_align_center vh-100`}>\r\n\t\t\t<form onSubmit={(e)=>restoreHandler(e)}>\r\n\t\t\t\t<h1 className=\"text text_type_main-medium\">Восстановление пароля</h1>\r\n\t\t\t\t{errorMsg && <AppError error={errorMsg}/>}\r\n\t\t\t\t<div className='mt-6'>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\ttype={'text'}\r\n\t\t\t\t\t\tplaceholder={'Укажите e-mail'}\r\n\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\tname={'e-mail'}\r\n\t\t\t\t\t\terror={false}\r\n\t\t\t\t\t\tsize={'default'}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='mt-6'>\r\n\t\t\t\t\t<Button htmlType=\"submit\" type=\"primary\" size=\"medium\">\r\n\t\t\t\t\t\tВосстановить\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='mt-20'>\r\n\t\t\t\t\t<span className='text text_type_main-default text_color_inactive'>Вспомнили пароль? </span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<NavLink className='text text_type_main-default text_color_inactive nav_link' to=\"/login\">\r\n\t\t\t\t\t\t\tВойти\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}","import { Button, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { SyntheticEvent, useCallback, useState } from 'react';\r\nimport { NavLink, Redirect, useHistory } from 'react-router-dom';\r\nimport { AppError } from '../../components/app-error/app-error';\r\nimport { IResetFormData } from '../../services/types/auth';\r\nimport { passwordResetStep2Request } from '../../utils/api/auth-api';\r\n\r\nexport const ResetPasswordPage = () => {\r\n\tconst [formData, setFormData] = useState<IResetFormData>({\r\n\t\ttoken: \"\",\r\n\t\tpassword: \"\"\r\n\t});\r\n\tconst [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n\tconst history = useHistory<{ from: string }>();\r\n\r\n\tconst setValue = (target: HTMLInputElement) => {\r\n\t\tconst {name, value} = target;\r\n\t\tsetFormData({\r\n\t\t\t...formData,\r\n\t\t\t[name]: value\r\n\t\t})\r\n\t}\r\n\r\n\tconst restoreHandler = useCallback(async(e: SyntheticEvent<HTMLFormElement>)=>{\r\n\t\te.preventDefault();\r\n\t\tconst result = await passwordResetStep2Request(formData);\r\n\t\tif(result.success)\r\n\t\t{\r\n\t\t\thistory.replace({pathname: \"/login\"});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tsetErrorMsg(result.message);\r\n\t\t}\r\n\t}, [formData]);\r\n\r\n\tif(history.location?.state?.from === \"/forgot-password\")\r\n\t{\r\n\t\treturn(\r\n\t\t\t<div className={`display_flex display_flex-center text_align_center vh-100`}>\r\n\t\t\t\t<form onSubmit={(e)=>restoreHandler(e)}>\r\n\t\t\t\t\t<h1 className=\"text text_type_main-medium\">Восстановление пароля</h1>\r\n\t\t\t\t\t{errorMsg && <AppError error={errorMsg}/>}\r\n\t\t\t\t\t<div className='mt-6'>\r\n\t\t\t\t\t\t<PasswordInput onChange={e => setValue(e.target)} value={formData.password} name={'password'} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='mt-6'>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\ttype={'text'}\r\n\t\t\t\t\t\t\tplaceholder={'Введите код из письма'}\r\n\t\t\t\t\t\t\tonChange={e => setValue(e.target)}\r\n\t\t\t\t\t\t\tvalue={formData.token}\r\n\t\t\t\t\t\t\terror={false}\r\n\t\t\t\t\t\t\tname={'token'}\r\n\t\t\t\t\t\t\tsize={'default'}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='mt-6'>\r\n\t\t\t\t\t\t<Button htmlType=\"button\" type=\"primary\" size=\"medium\">\r\n\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='mt-20'>\r\n\t\t\t\t\t\t<span className='text text_type_main-default text_color_inactive'>Вспомнили пароль? </span>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<NavLink className='text text_type_main-default text_color_inactive nav_link' to=\"/login\">\r\n\t\t\t\t\t\t\t\tВойти\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn <Redirect to={{pathname: \"/forgot-password\"}} />\r\n\t}\r\n}","import { FC, PropsWithChildren } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport style from './app-nav-item.module.css';\r\n\r\ninterface IAppNavItem{\r\n\tclassName?: string;\r\n\tactive?: boolean;\r\n\texact?: boolean;\r\n\ttext: string;\r\n\tpath: string\r\n}\r\n\r\nexport const AppNavItem: FC<PropsWithChildren<IAppNavItem>> = ({className, active, path, text, children, exact }) =>  {\r\n\treturn (\r\n\t\t<NavLink exact={exact} activeClassName={style.active} className={`${style.a_href} ${className} ${active ? style.active : ''}`} to={path}>\r\n\t\t\t{children}\r\n\t\t\t<span className={`${style.a_href_span}`}>{text}</span>\r\n\t\t</NavLink>\r\n\t)\r\n}","import React, { FC, useCallback } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AppNavItem } from \"../../components/app-nav-item/app-nav-item\";\r\nimport { signOut } from \"../../services/action-types/user\";\r\nimport style from \"./profile-container.module.css\";\r\n\r\nexport const ProfileContainerPage: FC<{ children: React.ReactNode }> = ({\r\n\tchildren,\r\n}) => {\r\n\tconst history = useHistory();\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst logoutHandler = useCallback(async () => {\r\n\t\tdispatch(signOut());\r\n\t\thistory.replace({ pathname: \"/login\" });\r\n\t}, []);\r\n\treturn (\r\n\t\t<div className=\"display_flex\">\r\n\t\t\t<div className={style.width_30_percent}>\r\n\t\t\t\t<div className=\"pt-5 pb-5\">\r\n\t\t\t\t\t<AppNavItem\r\n\t\t\t\t\t\ttext=\"Профиль\"\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tclassName=\"text text_type_main-medium text_color_inactive text_decoration_none\"\r\n\t\t\t\t\t\tpath=\"/profile\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"pt-5 pb-5\">\r\n\t\t\t\t\t<AppNavItem\r\n\t\t\t\t\t\ttext=\"История заказов\"\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tclassName=\"text text_type_main-medium text_color_inactive text_decoration_none\"\r\n\t\t\t\t\t\tpath=\"/profile/orders\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"pt-5 pb-5 text text_type_main-medium text_color_inactive\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"text text_type_main-medium text_color_inactive text_decoration_none cursor_pointer\"\r\n\t\t\t\t\t\tonClick={logoutHandler}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tВыход\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-20 text text_type_main-default text_color_inactive\">\r\n\t\t\t\t\tВ этом разделе вы можете изменить свои персональные\r\n\t\t\t\t\tданные\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"mr-15 width_100_percent\">{children}</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","export const SET_CURRENT_INGREDIENT = \"SET_CURRENT_INGREDIENT\";\r\n","import { FC, SyntheticEvent } from 'react';\r\nimport style from './modal-overlay.module.css';\r\n\r\ninterface IModalOverlay{\r\n\tchildren: React.ReactNode,\r\n\tonClose: (e: SyntheticEvent)=>void\r\n}\r\n\r\nexport const ModalOverlay: FC<IModalOverlay> = ({onClose, children})=>{\r\n\treturn (\r\n\t\t<div onClick={onClose} className={`${style.modal_overlay} display_flex display_flex-center`}>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {\r\n\tFC,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tReactNode,\r\n\tKeyboardEvent,\r\n\tSyntheticEvent,\r\n} from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { ModalOverlay } from \"../modal-overlay/modal-overlay\";\r\nimport style from \"./modal.module.css\";\r\n\r\ntype TModalCloseEventType = SyntheticEvent | KeyboardEvent | Event;\r\n\r\ninterface IModal {\r\n\theader?: string;\r\n\tonClose: (e: TModalCloseEventType) => void;\r\n\tchildren: ReactNode;\r\n}\r\n\r\nexport const Modal: FC<IModal> = ({ header, onClose, children }) => {\r\n\tconst escapeHandler = useCallback((e: Event) => {\r\n\t\tonClose(e);\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener(\"keydown\", escapeHandler, false);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"keydown\", escapeHandler, false);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst onCloseClick = useCallback((e: SyntheticEvent | KeyboardEvent) => {\r\n\t\tif (\r\n\t\t\te.target === e.currentTarget ||\r\n\t\t\t(e.target as HTMLDivElement).closest(\".close-button\") ||\r\n\t\t\t(e as KeyboardEvent).key === \"Escape\"\r\n\t\t) {\r\n\t\t\tonClose(e);\r\n\t\t}\r\n\t}, []);\r\n\r\n\treturn createPortal(\r\n\t\t<ModalOverlay onClose={onCloseClick}>\r\n\t\t\t<div\r\n\t\t\t\tclassName={`${style.modal_container} pt-10 pl-10 pr-10 pb-15`}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"display_flex display_flex_space_between\">\r\n\t\t\t\t\t<div className=\"text text_type_main-large\">\r\n\t\t\t\t\t\t{header}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"cursor_pointer close-button\"\r\n\t\t\t\t\t\tonClick={onCloseClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CloseIcon type=\"primary\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</ModalOverlay>,\r\n\t\tdocument.body\r\n\t);\r\n};\r\n","import { FC } from \"react\";\r\nimport { IIngredientDetails } from \"../../services/types/ingredient\";\r\n\r\nexport const IngredientDetails: FC<IIngredientDetails> = ({\r\n\timage_large,\r\n\tname,\r\n\tcalories,\r\n\tproteins,\r\n\tfat,\r\n\tcarbohydrates,\r\n}) => {\r\n\treturn (\r\n\t\t<div className=\"text_align_center\">\r\n\t\t\t<img src={image_large} />\r\n\t\t\t<div\r\n\t\t\t\tdata-testid=\"modal-current-ingredient-name\"\r\n\t\t\t\tclassName=\"text text_type_main-medium mt-4\"\r\n\t\t\t>\r\n\t\t\t\t{name}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"display_flex display_flex-center text text_type_main-default text_color_inactive mt-8\">\r\n\t\t\t\t<div className=\"pr-5\">\r\n\t\t\t\t\tКалории, ккал <br /> {calories}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"pr-5\">\r\n\t\t\t\t\tБелки, г <br /> {proteins}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"pr-5\">\r\n\t\t\t\t\tЖиры, г <br /> {fat}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"pr-5\">\r\n\t\t\t\t\tУглеводы, г <br /> {carbohydrates}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { useEffect, useCallback, useState } from \"react\";\r\nimport { useHistory, useLocation, useRouteMatch } from \"react-router-dom\";\r\nimport { setCurrentIngredientAction } from \"../../services/action-creators/current-ingredient\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Modal } from \"../../components/modal/modal\";\r\nimport { IngredientDetails } from \"../../components/ingredient-details/ingredient-details\";\r\nimport { MatchParams } from \"../../services/types/routing\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nexport const IngredientPage = () => {\r\n\tconst history = useHistory<{ isModal: boolean }>();\r\n\tconst dispatch = useDispatch();\r\n\tconst { params } = useRouteMatch<MatchParams>();\r\n\tconst [isModal] = useState<boolean>(history.location.state?.isModal);\r\n\r\n\tconst ingredients = useSelector((state) => {\r\n\t\treturn state.ingredients.items;\r\n\t});\r\n\r\n\tconst buns = useSelector((state) => {\r\n\t\treturn state.ingredients.buns;\r\n\t});\r\n\r\n\tconst currentIngredient = useSelector((state) => {\r\n\t\treturn state.currentIngredient;\r\n\t});\r\n\r\n\tconst handleCloseModal = useCallback(() => {\r\n\t\thistory.replace({ pathname: \"/\" });\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (params.id) {\r\n\t\t\tconst ingredient = [...ingredients, ...buns].find(\r\n\t\t\t\t(x) => x._id === params.id\r\n\t\t\t);\r\n\t\t\tif (ingredient) {\r\n\t\t\t\tdispatch(setCurrentIngredientAction(ingredient));\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ingredients, buns]);\r\n\r\n\tif (currentIngredient) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{isModal ? (\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\tonClose={handleCloseModal}\r\n\t\t\t\t\t\theader=\"Детали ингредиента\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<IngredientDetails {...currentIngredient} />\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<IngredientDetails {...currentIngredient} />\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n};\r\n","import { SET_CURRENT_INGREDIENT } from \"../action-types/current-ingredient\";\r\nimport { IIngredientDetails } from \"../types/ingredient\";\r\n\r\nexport interface ISetCurrentIngredientAction {\r\n\ttype: typeof SET_CURRENT_INGREDIENT;\r\n\titem: IIngredientDetails;\r\n}\r\n\r\nexport type TCurrentIngredientAction = ISetCurrentIngredientAction;\r\n\r\nexport const setCurrentIngredientAction = (\r\n\titem: IIngredientDetails\r\n): ISetCurrentIngredientAction => {\r\n\treturn {\r\n\t\ttype: SET_CURRENT_INGREDIENT,\r\n\t\titem: item,\r\n\t};\r\n};\r\n","import {\r\n\tButton,\r\n\tInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { updateUser } from \"../../../services/action-types/user\";\r\nimport { IRegisterFormData } from \"../../../services/types/auth\";\r\nimport { useSelector } from \"../../../utils/hooks\";\r\n\r\ninterface IInputsDisabledSettings {\r\n\tname?: boolean;\r\n\temail?: boolean;\r\n\tpassword?: boolean;\r\n}\r\n\r\nexport const ProfilePage = () => {\r\n\tconst user = useSelector((state) => {\r\n\t\treturn state.user;\r\n\t});\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst [inputsDisabled, setInputDisabled] =\r\n\t\tuseState<IInputsDisabledSettings>({\r\n\t\t\tname: true,\r\n\t\t\temail: true,\r\n\t\t\tpassword: true,\r\n\t\t});\r\n\r\n\tconst [formChanged, setFormChanged] = useState<boolean>(false);\r\n\r\n\tconst inputNameRef = useRef<HTMLInputElement>(null);\r\n\tconst inputEmailRef = useRef<HTMLInputElement>(null);\r\n\tconst inputPasswordRef = useRef<HTMLInputElement>(null);\r\n\r\n\tconst [formData, setFormData] = useState<IRegisterFormData>({\r\n\t\tname: \"\",\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tsetFormData({ ...user.data, password: \"\" } as IRegisterFormData);\r\n\t}, [user.data]);\r\n\r\n\tconst setValue = (target: HTMLInputElement) => {\r\n\t\tconst { name, value } = target;\r\n\t\tsetFormData({\r\n\t\t\t...formData,\r\n\t\t\t[name]: value,\r\n\t\t});\r\n\t\tsetFormChanged(true);\r\n\t};\r\n\tconst onIconClick = (inputName: string) => {\r\n\t\tlet newState: IInputsDisabledSettings = Object.entries(\r\n\t\t\tinputsDisabled\r\n\t\t).reduce((newObj, item) => {\r\n\t\t\tnewObj[item[0] as keyof IInputsDisabledSettings] = true;\r\n\t\t\treturn newObj;\r\n\t\t}, {} as IInputsDisabledSettings);\r\n\t\tnewState[inputName as keyof IInputsDisabledSettings] = false;\r\n\t\tsetInputDisabled(newState);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!inputsDisabled.name) {\r\n\t\t\tinputNameRef.current?.focus();\r\n\t\t}\r\n\t\tif (!inputsDisabled.email) {\r\n\t\t\tinputEmailRef.current?.focus();\r\n\t\t}\r\n\t\tif (!inputsDisabled.password) {\r\n\t\t\tinputPasswordRef.current?.focus();\r\n\t\t}\r\n\t}, [inputsDisabled]);\r\n\r\n\tconst saveHandler = useCallback(async () => {\r\n\t\tdispatch(updateUser(formData));\r\n\t\tsetFormChanged(false);\r\n\t}, [formData]);\r\n\r\n\tconst cancelHandler: () => void = useCallback(() => {\r\n\t\tsetFormData({ ...user.data, password: \"\" } as IRegisterFormData);\r\n\t\tsetFormChanged(false);\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t<Input\r\n\t\t\t\t\ttype={\"text\"}\r\n\t\t\t\t\tplaceholder={\"Имя\"}\r\n\t\t\t\t\tonChange={(e) => setValue(e.target)}\r\n\t\t\t\t\ticon={\"EditIcon\"}\r\n\t\t\t\t\tvalue={formData.name}\r\n\t\t\t\t\tname={\"name\"}\r\n\t\t\t\t\terror={false}\r\n\t\t\t\t\tref={inputNameRef}\r\n\t\t\t\t\tdisabled={inputsDisabled.name}\r\n\t\t\t\t\tonIconClick={(e) => onIconClick(\"name\")}\r\n\t\t\t\t\terrorText={\"Ошибка\"}\r\n\t\t\t\t\tsize={\"default\"}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t<Input\r\n\t\t\t\t\ttype={\"text\"}\r\n\t\t\t\t\tplaceholder={\"Логин\"}\r\n\t\t\t\t\tonChange={(e) => setValue(e.target)}\r\n\t\t\t\t\ticon={\"EditIcon\"}\r\n\t\t\t\t\tvalue={formData.email}\r\n\t\t\t\t\tname={\"email\"}\r\n\t\t\t\t\terror={false}\r\n\t\t\t\t\tref={inputEmailRef}\r\n\t\t\t\t\tdisabled={inputsDisabled.email}\r\n\t\t\t\t\tonIconClick={(e) => onIconClick(\"email\")}\r\n\t\t\t\t\terrorText={\"Ошибка\"}\r\n\t\t\t\t\tsize={\"default\"}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t<Input\r\n\t\t\t\t\ttype={\"password\"}\r\n\t\t\t\t\tplaceholder={\"Пароль\"}\r\n\t\t\t\t\tonChange={(e) => setValue(e.target)}\r\n\t\t\t\t\ticon={\"EditIcon\"}\r\n\t\t\t\t\tvalue={formData.password}\r\n\t\t\t\t\tname={\"password\"}\r\n\t\t\t\t\terror={false}\r\n\t\t\t\t\tref={inputPasswordRef}\r\n\t\t\t\t\tdisabled={inputsDisabled.password}\r\n\t\t\t\t\tonIconClick={(e) => onIconClick(\"password\")}\r\n\t\t\t\t\terrorText={\"Ошибка\"}\r\n\t\t\t\t\tsize={\"default\"}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t{formChanged && (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\thtmlType=\"button\"\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\t\tonClick={saveHandler}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\thtmlType=\"reset\"\r\n\t\t\t\t\t\t\tonClick={cancelHandler}\r\n\t\t\t\t\t\t\ttype=\"secondary\"\r\n\t\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tОтмена\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","export function classNames(...args: (string | number | boolean)[]) {\r\n\tconst result = args\r\n\t\t.map((arg) => arg.toString())\r\n\t\t.filter(Boolean)\r\n\t\t.join(\" \");\r\n\treturn result;\r\n}\r\n","import { FC } from \"react\";\r\nimport { classNames } from \"../../utils/class-names\";\r\nimport style from \"./app-avatar.module.scss\";\r\n\r\nexport interface IAppAvatar {\r\n\timgUrl?: string | null;\r\n\ttext?: string | null;\r\n}\r\n\r\nexport const AppAvatar: FC<IAppAvatar> = ({ imgUrl, text }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\r\n\t\t\t\t\tstyle.avatar,\r\n\t\t\t\t\ttext ? style.text_bg : \"\"\r\n\t\t\t\t)}\r\n\t\t\t\tstyle={{ backgroundImage: !text ? `url(${imgUrl})` : `` }}\r\n\t\t\t>\r\n\t\t\t\t{text && (\r\n\t\t\t\t\t<div className=\"text text_type_main-default\">\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { FC, useMemo } from \"react\";\r\nimport { IIngredientDetails } from \"../../services/types/ingredient\";\r\nimport { classNames } from \"../../utils/class-names\";\r\nimport { AppAvatar } from \"../app-avatar/app-avatar\";\r\nimport style from \"./app-avatar-list.module.scss\";\r\n\r\nexport interface IAppAvatarList {\r\n\titems: ReadonlyArray<IIngredientDetails>;\r\n\tshowCount: number;\r\n}\r\n\r\nexport const AppAvatarList: FC<IAppAvatarList> = ({ items, showCount }) => {\r\n\tconst splicedIngredientsData = useMemo(() => {\r\n\t\treturn items.length > showCount\r\n\t\t\t? [...items].splice(0, showCount + 1).reverse()\r\n\t\t\t: items;\r\n\t}, [items.length, showCount]);\r\n\r\n\tconst restCountIngredientsData = useMemo(() => {\r\n\t\treturn items.length - splicedIngredientsData.length;\r\n\t}, [splicedIngredientsData.length, items.length]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"flex_direction_reverse\",\r\n\t\t\t\tstyle.avatars_list\r\n\t\t\t)}\r\n\t\t>\r\n\t\t\t{restCountIngredientsData > 0 && (\r\n\t\t\t\t<div className={style.avatar_container}>\r\n\t\t\t\t\t<AppAvatar\r\n\t\t\t\t\t\timgUrl={items[items.length - 1].image_mobile}\r\n\t\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\trestCountIngredientsData > 1\r\n\t\t\t\t\t\t\t\t? `+${restCountIngredientsData.toString()}`\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{splicedIngredientsData.map((ingredient, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={`${ingredient._id}${index}`}\r\n\t\t\t\t\t\tclassName={style.avatar_container}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<AppAvatar imgUrl={ingredient.image_mobile} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC } from \"react\";\r\n\r\nexport const AppDataWithCurrency: FC<{ data: number | string }> = ({\r\n\tdata,\r\n}) => {\r\n\treturn (\r\n\t\t<div className=\"inline-flex text text_type_digits-default\">\r\n\t\t\t{data}\r\n\t\t\t<span className=\"pl-2\">\r\n\t\t\t\t<CurrencyIcon type=\"primary\" />\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { FC, useCallback } from \"react\";\r\nimport { FeedItemWithIngredients } from \"../../services/types/feed\";\r\nimport { OrderStatus } from \"../../services/types/status\";\r\nimport { classNames } from \"../../utils/class-names\";\r\nimport { AppAvatarList } from \"../app-avatar-list/app-avatar-list\";\r\nimport { AppDataWithCurrency } from \"../app-price/app-price\";\r\n\r\nexport const FeedItem: FC<{\r\n\torder: FeedItemWithIngredients;\r\n\tshowStatus?: boolean;\r\n\topenModal: () => void;\r\n}> = ({ order, showStatus = false, openModal }) => {\r\n\tconst openModalHandler = useCallback(() => {\r\n\t\topenModal();\r\n\t}, []);\r\n\tconst statusClassName = classNames(\r\n\t\t\"pt-2\",\r\n\t\torder.status == OrderStatus.done ? \"feed_state_active\" : \"\"\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tonClick={openModalHandler}\r\n\t\t\tclassName=\"constructor-element display_block mb-4 max-width-100 pb-6 pt-6\"\r\n\t\t>\r\n\t\t\t<div className=\"display_flex mb-6 display_flex_space_between\">\r\n\t\t\t\t<div className=\"text text_type_digits-default\">\r\n\t\t\t\t\t#{order.number}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"text text_type_main-default text_color_inactive\">\r\n\t\t\t\t\t{order.howDaysAgo}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"pb-6\">\r\n\t\t\t\t<div className=\"text text_type_main-medium\">\r\n\t\t\t\t\t{order.name}\r\n\t\t\t\t</div>\r\n\t\t\t\t{showStatus && (\r\n\t\t\t\t\t<div className={statusClassName}>\r\n\t\t\t\t\t\t{order.statusCaption}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"display_flex display_flex_space_between\">\r\n\t\t\t\t<AppAvatarList\r\n\t\t\t\t\titems={order.ingredientsData}\r\n\t\t\t\t\tshowCount={3}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"text text_type_digits-default\">\r\n\t\t\t\t\t<AppDataWithCurrency data={order.totalPrice} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","export const WS_FEED_CONNECTION_START: \"WS_FEED_CONNECTION_START\" =\r\n\t\"WS_FEED_CONNECTION_START\";\r\nexport const WS_FEED_SEND_MESSAGE: \"WS_FEED_SEND_MESSAGE\" =\r\n\t\"WS_FEED_SEND_MESSAGE\";\r\nexport const WS_FEED_CONNECTION_SUCCESS: \"WS_FEED_CONNECTION_SUCCESS\" =\r\n\t\"WS_FEED_CONNECTION_SUCCESS\";\r\nexport const WS_FEED_CONNECTION_CLOSED: \"WS_FEED_CONNECTION_CLOSED\" =\r\n\t\"WS_FEED_CONNECTION_CLOSED\";\r\nexport const WS_FEED_CONNECTION_ERROR: \"WS_FEED_CONNECTION_ERROR\" =\r\n\t\"WS_FEED_CONNECTION_ERROR\";\r\nexport const WS_FEED_GET_MESSAGE: \"WS_FEED_GET_MESSAGE\" = \"WS_FEED_GET_MESSAGE\";\r\n","import {\r\n\tWS_FEED_CONNECTION_CLOSED,\r\n\tWS_FEED_CONNECTION_ERROR,\r\n\tWS_FEED_CONNECTION_START,\r\n\tWS_FEED_CONNECTION_SUCCESS,\r\n\tWS_FEED_GET_MESSAGE,\r\n\tWS_FEED_SEND_MESSAGE,\r\n} from \"../action-types/feed\";\r\nimport { CFeedItem, IFeed } from \"../types/feed\";\r\n\r\nexport interface IStartFeedConnectionAction {\r\n\ttype: typeof WS_FEED_CONNECTION_START;\r\n\turl: string;\r\n}\r\n\r\nexport interface IGetFeedOpenConnectionAction {\r\n\ttype: typeof WS_FEED_CONNECTION_SUCCESS;\r\n}\r\n\r\nexport interface ISetFeedAction {\r\n\ttype: typeof WS_FEED_GET_MESSAGE;\r\n\tpayload: IFeed;\r\n}\r\n\r\nexport interface ICloseFeedConnectionAction {\r\n\ttype: typeof WS_FEED_CONNECTION_CLOSED;\r\n\tpayload: string;\r\n}\r\n\r\nexport interface IErrorFeedConnectionAction {\r\n\ttype: typeof WS_FEED_CONNECTION_ERROR;\r\n\tpayload: Event;\r\n}\r\n\r\nexport interface ISendFeedMessageAction {\r\n\ttype: typeof WS_FEED_SEND_MESSAGE;\r\n\tpayload: CFeedItem;\r\n}\r\n\r\nexport const startConnectionAction = (\r\n\turl: string\r\n): IStartFeedConnectionAction => {\r\n\treturn {\r\n\t\ttype: WS_FEED_CONNECTION_START,\r\n\t\turl: url,\r\n\t};\r\n};\r\n\r\nexport const getOpenConnectionAction = (): IGetFeedOpenConnectionAction => {\r\n\treturn {\r\n\t\ttype: WS_FEED_CONNECTION_SUCCESS,\r\n\t};\r\n};\r\n\r\nexport const setOrdersAction = (data: IFeed): ISetFeedAction => {\r\n\treturn {\r\n\t\ttype: WS_FEED_GET_MESSAGE,\r\n\t\tpayload: data,\r\n\t};\r\n};\r\n\r\nexport const closeFeedConnectionAction = (\r\n\tmessage: string\r\n): ICloseFeedConnectionAction => {\r\n\treturn {\r\n\t\ttype: WS_FEED_CONNECTION_CLOSED,\r\n\t\tpayload: message,\r\n\t};\r\n};\r\n\r\nexport const errorFeedConnectionAction = (\r\n\tdata: Event\r\n): IErrorFeedConnectionAction => {\r\n\treturn {\r\n\t\ttype: WS_FEED_CONNECTION_ERROR,\r\n\t\tpayload: data,\r\n\t};\r\n};\r\n\r\nexport const sendFeedMessageAction = (\r\n\tdata: CFeedItem\r\n): ISendFeedMessageAction => {\r\n\treturn {\r\n\t\ttype: WS_FEED_SEND_MESSAGE,\r\n\t\tpayload: data,\r\n\t};\r\n};\r\n\r\nexport type TWsFeedAction =\r\n\t| IGetFeedOpenConnectionAction\r\n\t| ISetFeedAction\r\n\t| IStartFeedConnectionAction\r\n\t| ICloseFeedConnectionAction\r\n\t| IErrorFeedConnectionAction\r\n\t| ISendFeedMessageAction;\r\n","import { IIngredientDetails } from \"./ingredient\";\r\nimport { OrderStatus, OrderStatusLabel } from \"./status\";\r\n\r\nexport interface IFeed {\r\n\torders: ReadonlyArray<CFeedItem>;\r\n\tsuccess: boolean;\r\n\ttotal: number;\r\n\ttotalToday: number;\r\n}\r\n\r\nexport class CFeedItem {\r\n\tingredients: Array<string> = [];\r\n\t_id!: string;\r\n\tstatus!: OrderStatus;\r\n\tnumber!: number;\r\n\tcreatedAt!: string;\r\n\tupdatedAt!: string;\r\n\tname: string = \"\";\r\n}\r\n\r\nexport class FeedItemWithIngredients extends CFeedItem {\r\n\tconstructor(data: CFeedItem) {\r\n\t\tsuper();\r\n\t\tthis.ingredients = data.ingredients;\r\n\t\tthis._id = data._id;\r\n\t\tthis.status = data.status;\r\n\t\tthis.number = data.number;\r\n\t\tthis.createdAt = data.createdAt;\r\n\t\tthis.updatedAt = data.updatedAt;\r\n\t\tthis.name = data.name;\r\n\t}\r\n\r\n\tget totalPrice(): number {\r\n\t\treturn this.ingredientsData.reduce((sum, current) => {\r\n\t\t\tsum += current.price;\r\n\t\t\treturn sum;\r\n\t\t}, 0);\r\n\t}\r\n\r\n\tingredientsData: IIngredientDetails[] = [];\r\n\r\n\tget statusCaption(): string | undefined {\r\n\t\treturn OrderStatusLabel.get(this.status as OrderStatus);\r\n\t}\r\n\r\n\tget createdAtDate(): Date {\r\n\t\treturn new Date(this.createdAt);\r\n\t}\r\n\r\n\tget howDaysAgo(): string {\r\n\t\treturn this.createdAtDate?.getHowMuchDaysAgo() || \"\";\r\n\t}\r\n\r\n\tsetIngredients(allIngredients: IIngredientDetails[]) {\r\n\t\t// this.ingredientsData = allIngredients.filter((ingredient) =>\r\n\t\t// \tthis.ingredients.find((id) => id === ingredient._id)\r\n\t\t// );\r\n\t\tconst allIngredientsMap = allIngredients.reduce((acc, current) => {\r\n\t\t\tacc.set(current._id, current);\r\n\t\t\treturn acc;\r\n\t\t}, new Map() as Map<string, IIngredientDetails>);\r\n\r\n\t\tthis.ingredientsData = this.ingredients\r\n\t\t\t.map((ingredient) => {\r\n\t\t\t\treturn allIngredientsMap.get(ingredient);\r\n\t\t\t})\r\n\t\t\t.filter(\r\n\t\t\t\t(ingredient): ingredient is IIngredientDetails =>\r\n\t\t\t\t\t!!ingredient\r\n\t\t\t);\r\n\t}\r\n}\r\n","import { useSelector } from \"../../utils/hooks\";\r\nimport { IInitalFeedState } from \"../reducers/feed\";\r\nimport { RootState } from \"../types\";\r\nimport { FeedItemWithIngredients } from \"../types/feed\";\r\n\r\nexport const useFeedOrders = (\r\n\tgetReducerState: (x: RootState) => IInitalFeedState\r\n) => {\r\n\tconst { orders, total, totalToday } = useSelector((state) => {\r\n\t\tconst ingredients = [\r\n\t\t\t...state.ingredients.items,\r\n\t\t\t...state.ingredients.buns,\r\n\t\t];\r\n\t\tconst feed = getReducerState(state);\r\n\t\tconst model = feed.orders.map((order) => {\r\n\t\t\tconst result = new FeedItemWithIngredients(order);\r\n\t\t\tresult.setIngredients(ingredients);\r\n\t\t\treturn result;\r\n\t\t});\r\n\t\treturn {\r\n\t\t\torders: model,\r\n\t\t\ttotal: feed.total,\r\n\t\t\ttotalToday: feed.totalToday,\r\n\t\t};\r\n\t});\r\n\treturn { orders, total, totalToday };\r\n};\r\n","import { getCookie } from \"../../utils/cookie\";\r\nimport {\r\n\tWS_FEED_CONNECTION_CLOSED,\r\n\tWS_FEED_CONNECTION_ERROR,\r\n\tWS_FEED_CONNECTION_START,\r\n\tWS_FEED_CONNECTION_SUCCESS,\r\n\tWS_FEED_GET_MESSAGE,\r\n\tWS_FEED_SEND_MESSAGE,\r\n} from \"../action-types/feed\";\r\n\r\nexport const ordersAllWsUrl = \"wss://norma.nomoreparties.space/orders/all\";\r\nexport const ordersUserWsUrl = `wss://norma.nomoreparties.space/orders`;\r\n\r\nexport const wsActionsFeed = {\r\n\twsInit: WS_FEED_CONNECTION_START,\r\n\tonOpen: WS_FEED_CONNECTION_SUCCESS,\r\n\tonMessage: WS_FEED_GET_MESSAGE,\r\n\tonClose: WS_FEED_CONNECTION_CLOSED,\r\n\tonError: WS_FEED_CONNECTION_ERROR,\r\n\twsSendMessage: WS_FEED_SEND_MESSAGE,\r\n};\r\n","import { useCallback, useEffect, useMemo } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\nimport { FeedItem } from \"../../../components/feed-item/feed-item\";\r\nimport {\r\n\tcloseFeedConnectionAction,\r\n\tstartConnectionAction,\r\n} from \"../../../services/action-creators/feed\";\r\nimport { useFeedOrders } from \"../../../services/hooks/useFeedOrders\";\r\nimport { RootState } from \"../../../services/types\";\r\nimport { ordersUserWsUrl } from \"../../../services/variables/web-socket\";\r\nimport { getCookie } from \"../../../utils/cookie\";\r\nimport style from \"./profile-orders.module.scss\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport const ProfileOrdersPage = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst location = useLocation();\r\n\tconst history = useHistory();\r\n\r\n\tconst { orders, total, totalToday } = useFeedOrders(\r\n\t\t(x: RootState) => x.feed\r\n\t);\r\n\r\n\tconst ordersDesc = useMemo(() => {\r\n\t\treturn [...orders].sort((a, b) =>\r\n\t\t\ta.createdAt < b.createdAt ? 1 : -1\r\n\t\t);\r\n\t}, [orders]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst accessToken = getCookie(\"accessToken\")?.replace(\"Bearer \", \"\");\r\n\t\tdispatch(\r\n\t\t\tstartConnectionAction(`${ordersUserWsUrl}?token=${accessToken}`)\r\n\t\t);\r\n\t\treturn function () {\r\n\t\t\tdispatch(\r\n\t\t\t\tcloseFeedConnectionAction(\"Соединение с сокетом завершено\")\r\n\t\t\t);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst openModalHandler = useCallback(\r\n\t\t(id: string) => {\r\n\t\t\thistory.push({\r\n\t\t\t\tpathname: `/profile/orders/${id}`,\r\n\t\t\t\tstate: { isModal: true, from: location.pathname },\r\n\t\t\t});\r\n\t\t},\r\n\t\t[orders]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className={style.scroll_container}>\r\n\t\t\t<div className=\"mr-2\">\r\n\t\t\t\t{ordersDesc?.map((order) => (\r\n\t\t\t\t\t<div key={order._id}>\r\n\t\t\t\t\t\t<FeedItem\r\n\t\t\t\t\t\t\torder={order}\r\n\t\t\t\t\t\t\tshowStatus={true}\r\n\t\t\t\t\t\t\topenModal={() => openModalHandler(order._id)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { FC } from \"react\";\r\nimport { IAppCollection } from \"../../services/types/collection\";\r\nimport { classNames } from \"../../utils/class-names\";\r\n\r\nexport const AppCollection: FC<IAppCollection & { className?: string }> = ({\r\n\tcaption,\r\n\titems,\r\n\tclassName = \"\",\r\n\titemCountInRow = 10,\r\n}) => {\r\n\tvar cssClass = classNames(\"mb-2\", className);\r\n\tconst rowCount = Math.ceil(items.length / itemCountInRow);\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"text text_type_main-medium mb-6\">{caption}</div>\r\n\t\t\t<div className=\"text text_type_digits-default display_flex flex-wrap\">\r\n\t\t\t\t{Array.from(Array(rowCount).keys()).map((row, index) => {\r\n\t\t\t\t\tconst start = index * itemCountInRow;\r\n\t\t\t\t\tconst finish =\r\n\t\t\t\t\t\tindex < rowCount\r\n\t\t\t\t\t\t\t? (index + 1) * itemCountInRow\r\n\t\t\t\t\t\t\t: items.length + 1;\r\n\t\t\t\t\tconst partItems = items.slice(start, finish);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={row} className=\"mr-4 mb-4\">\r\n\t\t\t\t\t\t\t{partItems.map((item) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tkey={item}\r\n\t\t\t\t\t\t\t\t\t\tclassName={cssClass}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{item}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { FC } from \"react\";\r\n\r\nexport const InfoCard: FC<{caption: string, count: number | null}> = ({caption, count}) =>{\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<div className=\"text text_type_main-medium\">{caption}</div>\r\n\t\t\t<div className=\"text text_type_digits-large\">{count}</div>\r\n\t\t</div>\r\n\t)\r\n}","import { getCorrectPluralFormText } from \"./helpers\";\r\n\r\n\r\ndeclare global {\r\n\tinterface Date {\r\n\t\tgetHowMuchDaysAgo(): string\r\n\t}\r\n }\r\n\r\n Date.prototype.getHowMuchDaysAgo = function (): string {\r\n\tconst now = new Date();\r\n\tconst diff = Math.round((now.getTime() - this.getTime()) / (1000 * 60 * 60 * 24));\r\n\tlet result: string = \"\";\r\n\tswitch (diff){\r\n\t\tcase 0:{\r\n\t\t\tresult = \"Сегодня\";\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 1:{\r\n\t\t\tresult = \"Вчера\";\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 2:{\r\n\t\t\tresult = \"Позавчера\";\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault:{\r\n\t\t\tresult = `${diff} ${getCorrectPluralFormText(diff, \"день\")} назад`;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tconst time = ('0' + this.getHours()).slice(-2) + ':' + ('0' + this.getMinutes()).slice(-2) \r\n\tresult = `${result}, ${time}`;\r\n\treturn result;\r\n };\r\n\r\n export{}\r\n","export const getCorrectPluralFormText = (number: number, text: string): string =>\r\n{\r\n\tswitch(text){\r\n\t\tcase \"день\":{\r\n\t\t\tif (number >= 10 && number <=20 || (number % 10 == 0) || (number % 10 >= 5))\r\n\t\t\t\treturn \"дней\";\r\n\t\t\telse if (number % 10 == 1)\r\n\t\t\t\treturn \"день\";\r\n\t\t\telse\r\n\t\t\t\treturn \"дня\"\r\n\t\t}\r\n\r\n\t}\r\n\treturn text;\r\n}","import { useCallback, useEffect, useMemo } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { AppCollection } from \"../../components/app-collection/app-collection\";\r\nimport { FeedItem } from \"../../components/feed-item/feed-item\";\r\nimport { InfoCard } from \"../../components/info-card/info-card\";\r\nimport {\r\n\tcloseFeedConnectionAction,\r\n\tstartConnectionAction,\r\n} from \"../../services/action-creators/feed\";\r\nimport { useFeedOrders } from \"../../services/hooks/useFeedOrders\";\r\nimport { RootState } from \"../../services/types\";\r\nimport { OrderStatus } from \"../../services/types/status\";\r\nimport { ordersAllWsUrl } from \"../../services/variables/web-socket\";\r\nimport { classNames } from \"../../utils/class-names\";\r\nimport {} from \"../../utils/date-extensions\";\r\nimport style from \"./feed.module.scss\";\r\n\r\nexport const FeedPage = () => {\r\n\tconst history = useHistory();\r\n\tconst location = useLocation<{ isModal: boolean }>();\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst { orders, total, totalToday } = useFeedOrders((x: RootState) => {\r\n\t\treturn x.feed;\r\n\t});\r\n\r\n\tconst doneOrders = useMemo(() => {\r\n\t\treturn orders\r\n\t\t\t.filter((order) => order.status === OrderStatus.done)\r\n\t\t\t.map((item) => item.number.toString());\r\n\t}, [orders]);\r\n\r\n\tconst pendingOrders = useMemo(() => {\r\n\t\treturn orders\r\n\t\t\t.filter((order) => order.status === OrderStatus.pending)\r\n\t\t\t.map((item) => item.number.toString());\r\n\t}, [orders]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(startConnectionAction(ordersAllWsUrl));\r\n\t\treturn function () {\r\n\t\t\tdispatch(\r\n\t\t\t\tcloseFeedConnectionAction(\"Соединение с сокетом завершено\")\r\n\t\t\t);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst openModalHandler = useCallback(\r\n\t\t(id: string) => {\r\n\t\t\thistory.push({\r\n\t\t\t\tpathname: `/feed/${id}`,\r\n\t\t\t\tstate: { isModal: true, from: location.pathname },\r\n\t\t\t});\r\n\t\t},\r\n\t\t[orders]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<main className=\"display_flex\">\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\r\n\t\t\t\t\t\"width_50_percent\",\r\n\t\t\t\t\tstyle.scroll_container\r\n\t\t\t\t)}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"text text_type_main-large mb-6\">\r\n\t\t\t\t\tЛента заказов\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"pr-4\">\r\n\t\t\t\t\t{orders.map((order) => (\r\n\t\t\t\t\t\t<div key={uuidv4()}>\r\n\t\t\t\t\t\t\t<FeedItem\r\n\t\t\t\t\t\t\t\torder={order}\r\n\t\t\t\t\t\t\t\topenModal={() =>\r\n\t\t\t\t\t\t\t\t\topenModalHandler(order._id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\r\n\t\t\t\t\t\"width_50_percent\",\r\n\t\t\t\t\tstyle.scroll_container\r\n\t\t\t\t)}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"mt-25 ml-10\">\r\n\t\t\t\t\t<div className=\"display_flex\">\r\n\t\t\t\t\t\t<div className=\"width_50_percent\">\r\n\t\t\t\t\t\t\t<AppCollection\r\n\t\t\t\t\t\t\t\tcaption=\"Готовы\"\r\n\t\t\t\t\t\t\t\titems={doneOrders}\r\n\t\t\t\t\t\t\t\tclassName=\"feed_state_active\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<AppCollection\r\n\t\t\t\t\t\t\t\tcaption=\"В работе\"\r\n\t\t\t\t\t\t\t\titems={pendingOrders}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"mb-15 mt-15\">\r\n\t\t\t\t\t\t\t<InfoCard\r\n\t\t\t\t\t\t\t\tcaption=\"Выполнено за все время:\"\r\n\t\t\t\t\t\t\t\tcount={total}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"mb-15\">\r\n\t\t\t\t\t\t\t<InfoCard\r\n\t\t\t\t\t\t\t\tcaption=\"Выполнено за сегодня:\"\r\n\t\t\t\t\t\t\t\tcount={totalToday}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</main>\r\n\t);\r\n};\r\n","import { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC } from \"react\";\r\nimport { AppAvatar, IAppAvatar } from \"../app-avatar/app-avatar\";\r\n\r\nexport interface IIngredientRaw {\r\n\ttext: string;\r\n\tprice: number;\r\n\tthumbnail: string;\r\n}\r\n\r\nexport const IngredientRaw: FC<IIngredientRaw> = ({\r\n\ttext,\r\n\tprice,\r\n\tthumbnail,\r\n}) => {\r\n\treturn (\r\n\t\t<div className=\"constructor-element__row pt-4 pb-4\">\r\n\t\t\t<AppAvatar imgUrl={thumbnail} />\r\n\t\t\t<span className=\"constructor-element__text text text_type_main-default pl-4\">\r\n\t\t\t\t{text}\r\n\t\t\t</span>\r\n\t\t\t<span className=\"constructor-element__price text text_type_digits-default\">\r\n\t\t\t\t{price}\r\n\t\t\t\t<CurrencyIcon type=\"primary\" />\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { FC, useEffect, useRef } from \"react\";\r\nimport { FeedItemWithIngredients } from \"../../services/types/feed\";\r\nimport { OrderStatus } from \"../../services/types/status\";\r\nimport { classNames } from \"../../utils/class-names\";\r\nimport { AppDataWithCurrency } from \"../app-price/app-price\";\r\nimport { IngredientRaw } from \"../ingredient-row/ingredient-row\";\r\nimport style from \"./feed-details.module.scss\";\r\n\r\nexport const FeedDetails: FC<{ order: FeedItemWithIngredients }> = ({\r\n\torder,\r\n}) => {\r\n\tconst statusClassName = classNames(\r\n\t\t\"mb-15\",\r\n\t\t\"text text_type_main-default\",\r\n\t\torder.status == OrderStatus.done ? \"feed_state_active\" : \"\"\r\n\t);\r\n\tconst refScroll = useRef<HTMLDivElement>(null);\r\n\tconst refNotScroll = useRef<HTMLDivElement>(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (refScroll.current) {\r\n\t\t\tif (\r\n\t\t\t\trefScroll.current.offsetHeight >=\r\n\t\t\t\twindow.innerHeight -\r\n\t\t\t\t\t220 -\r\n\t\t\t\t\t(refNotScroll.current?.offsetHeight || 0)\r\n\t\t\t) {\r\n\t\t\t\trefScroll.current.setAttribute(\r\n\t\t\t\t\t\"style\",\r\n\t\t\t\t\t\"height: 400px; padding-right:10px\"\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\trefScroll.current.removeAttribute(\"style\");\r\n\t\t\t}\r\n\t\t}\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div ref={refNotScroll}>\r\n\t\t\t\t<div className=\"text text_type_digits-default mb-10 text_align_center\">\r\n\t\t\t\t\t#{order.number}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"text text_type_main-medium mb-3\">\r\n\t\t\t\t\t{order.name}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={statusClassName}>{order.statusCaption}</div>\r\n\t\t\t\t<div className=\"text text_type_main-medium mb-6\">\r\n\t\t\t\t\tСостав:\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div ref={refScroll} className={style.scroll_container}>\r\n\t\t\t\t{order.ingredientsData.map((ingredient, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={`${ingredient._id}${index}`}>\r\n\t\t\t\t\t\t\t<IngredientRaw\r\n\t\t\t\t\t\t\t\ttext={ingredient.name}\r\n\t\t\t\t\t\t\t\tprice={ingredient.price}\r\n\t\t\t\t\t\t\t\tthumbnail={ingredient.image_mobile}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"display_flex display_flex_space_between mt-10\">\r\n\t\t\t\t<div className=\"text text_type_main-default text_color_inactive\">\r\n\t\t\t\t\t{order.howDaysAgo}\r\n\t\t\t\t</div>\r\n\t\t\t\t<AppDataWithCurrency data={order.totalPrice} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory, useRouteMatch } from \"react-router\";\r\nimport { FeedDetails } from \"../../../components/feed-details/feed-details\";\r\nimport { Modal } from \"../../../components/modal/modal\";\r\nimport { startConnectionAction } from \"../../../services/action-creators/feed\";\r\nimport { WS_FEED_CONNECTION_START } from \"../../../services/action-types/feed\";\r\nimport { FeedItemWithIngredients } from \"../../../services/types/feed\";\r\nimport { MatchParams } from \"../../../services/types/routing\";\r\nimport {\r\n\tordersAllWsUrl,\r\n\tordersUserWsUrl,\r\n} from \"../../../services/variables/web-socket\";\r\nimport { getCookie } from \"../../../utils/cookie\";\r\nimport { useSelector } from \"../../../utils/hooks\";\r\nimport style from \"./feed-details.module.scss\";\r\n\r\nexport const FeedDetailsPage = () => {\r\n\tconst history = useHistory<{ isModal: boolean; from: string }>();\r\n\tconst dispatch = useDispatch();\r\n\tconst [model, setModel] = useState<FeedItemWithIngredients | undefined>();\r\n\tconst { params } = useRouteMatch<MatchParams>();\r\n\tconst [isModal] = useState<boolean>(history.location.state?.isModal);\r\n\tconst [from] = useState<string>(history.location.state?.from);\r\n\r\n\tconst handleCloseModal = useCallback(() => {\r\n\t\thistory.replace({ pathname: from });\r\n\t}, [from, isModal]);\r\n\r\n\tconst order = useSelector((state) => {\r\n\t\treturn state.feed;\r\n\t});\r\n\r\n\tconst ingredients = useSelector((state) => {\r\n\t\treturn [...state.ingredients.buns, ...state.ingredients.items];\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!order.connected) {\r\n\t\t\tconst url = (from || history.location.pathname)\r\n\t\t\t\t.slice(1)\r\n\t\t\t\t.split(\"/\")[0];\r\n\t\t\tlet wsUrl = ordersAllWsUrl;\r\n\t\t\tif (url == \"profile\") {\r\n\t\t\t\tconst accessToken = getCookie(\"accessToken\")?.replace(\r\n\t\t\t\t\t\"Bearer \",\r\n\t\t\t\t\t\"\"\r\n\t\t\t\t);\r\n\t\t\t\twsUrl = `${ordersUserWsUrl}?token=${accessToken}`;\r\n\t\t\t}\r\n\t\t\tdispatch(startConnectionAction(wsUrl));\r\n\t\t}\r\n\t}, [order.connected]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (order.connected) {\r\n\t\t\tlet result = order.orders.find((x) => x._id === params.id);\r\n\t\t\tif (result) {\r\n\t\t\t\tlet orderWithIngredients = new FeedItemWithIngredients(\r\n\t\t\t\t\tresult\r\n\t\t\t\t);\r\n\t\t\t\torderWithIngredients.setIngredients(ingredients);\r\n\t\t\t\tsetModel(orderWithIngredients);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [order.connected, order.orders]);\r\n\r\n\tif (model) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{isModal ? (\r\n\t\t\t\t\t<Modal onClose={handleCloseModal}>\r\n\t\t\t\t\t\t<FeedDetails order={model} />\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"display_flex display_flex-center\">\r\n\t\t\t\t\t\t<div className={style.feed_details_container}>\r\n\t\t\t\t\t\t\t<FeedDetails order={model} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n};\r\n","import { IRequestData } from \"../../services/types/fetch\";\r\nimport { checkReponseAndGetData } from \"./request-api-helpers\";\r\nimport { requestWithBody } from \"../request-api\";\r\nimport { getCookie } from \"../cookie\";\r\n\r\nconst getIngredientsUrl = \"https://norma.nomoreparties.space/api/ingredients\";\r\nconst setOrderUrl = \"https://norma.nomoreparties.space/api/orders\";\r\n\r\nexport const getIngredientsData = () =>\r\n\tfetch(getIngredientsUrl).then((response) =>\r\n\t\tcheckReponseAndGetData(response)\r\n\t);\r\n\r\nexport const setOrderData = async (ids: string) => {\r\n\tconst requestData: IRequestData<{ingredients: string}> = {\r\n\t\turl: setOrderUrl,\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\tAuthorization: getCookie(\"accessToken\") || \"\",\r\n\t\t},\r\n\t\tformData: { ingredients: ids }\r\n\t};\r\n\r\n\treturn await requestWithBody(requestData).then((result) => {\r\n\t\treturn result;\r\n\t});\r\n};\r\n\r\n","import { getIngredientsData } from \"../../utils/api/burger-api\";\r\nimport {\r\n\tgetIngredientsFailedAction,\r\n\tgetIngredientsRequestAction,\r\n\tgetIngredientsSuccessAction,\r\n} from \"../action-creators/burger-ingredients\";\r\nimport { AppDispatch, AppThunk } from \"../types\";\r\n\r\nexport const GET_INGREDIENTS_REQUEST = \"GET_INGREDIENTS_REQUEST\";\r\nexport const GET_INGREDIENTS_SUCCESS = \"GET_INGREDIENTS_SUCCESS\";\r\nexport const GET_INGREDIENTS_FAILED = \"GET_INGREDIENTS_FAILED\";\r\n\r\nexport const getIngredients: AppThunk = () => (dispatch: AppDispatch) => {\r\n\tdispatch(getIngredientsRequestAction());\r\n\tgetIngredientsData()\r\n\t\t.then((response) => {\r\n\t\t\tdispatch(getIngredientsSuccessAction(response.data));\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tdispatch(getIngredientsFailedAction());\r\n\t\t});\r\n};\r\n","import {\r\n\tGET_INGREDIENTS_REQUEST,\r\n\tGET_INGREDIENTS_SUCCESS,\r\n\tGET_INGREDIENTS_FAILED,\r\n} from \"../action-types/burger-ingredients\";\r\nimport { IIngredientDetails } from \"../types/ingredient\";\r\n\r\n\r\nexport interface IGetIngredientsRequestAction{\r\n\ttype: typeof GET_INGREDIENTS_REQUEST\r\n}\r\n\r\nexport interface IGetIngredientsSuccessAction{\r\n\ttype: typeof GET_INGREDIENTS_SUCCESS,\r\n\tingredients: ReadonlyArray<IIngredientDetails>\r\n}\r\n\r\nexport interface IGetIngredientsFailedAction{\r\n\ttype: typeof GET_INGREDIENTS_FAILED\r\n}\r\n\r\nexport type TBurgerIngredientsAction = IGetIngredientsRequestAction | IGetIngredientsSuccessAction | IGetIngredientsFailedAction;\r\n\r\n\r\nexport const getIngredientsRequestAction = (): IGetIngredientsRequestAction => {\r\n\treturn {\r\n\t\ttype: GET_INGREDIENTS_REQUEST,\r\n\t};\r\n}\r\n\r\nexport const getIngredientsSuccessAction = (data: ReadonlyArray<IIngredientDetails>): IGetIngredientsSuccessAction => {\r\n\treturn {\r\n\t\ttype: GET_INGREDIENTS_SUCCESS,\r\n\t\tingredients: data,\r\n\t};\r\n}\r\n\r\nexport const getIngredientsFailedAction = (): IGetIngredientsFailedAction => {\r\n\treturn {\r\n\t\ttype: GET_INGREDIENTS_FAILED,\r\n\t};\r\n}\r\n","export const ADD_BURGER_INGREDIENT_IN_CONSTRUCTOR =\r\n\t\"ADD_BURGER_INGREDIENT_TO_CONSTRUCTOR\";\r\nexport const UPDATE_BURGER_BUN_IN_CONSTRUCTOR =\r\n\t\"UPDATE_BURGER_BUN_IN_CONSTRUCTOR\";\r\nexport const REMOVE_BURGER_INGREDIENT_FROM_CONSTRUCTOR =\r\n\t\"REMOVE_BURGER_INGREDIENT_FROM_CONSTRUCTOR\";\r\nexport const CLEAR_BURGER_INGREDIENTS_FROM_CONSTRUCTOR =\r\n\t\"CLEAR_BURGER_INGREDIENTS_FROM_CONSTRUCTOR\";\r\n\r\nexport const SET_ORDER_BURGER_INGREDIENTS_CONSTRUCTOR =\r\n\t\"SET_ORDER_BURGER_INGREDIENTS\";\r\n","import {\r\n\tsetOrderFailedAction,\r\n\tsetOrderRequestAction,\r\n\tsetOrderSuccessAction,\r\n} from \"../action-creators/order\";\r\nimport { setOrderData } from \"../../utils/api/burger-api\";\r\nimport { AppDispatch, AppThunk } from \"../types\";\r\n\r\nexport const SET_ORDER_REQUEST = \"SET_ORDER_REQUEST\";\r\nexport const SET_ORDER_SUCCESS = \"SET_ORDER_SUCCESS\";\r\nexport const SET_ORDER_FAILED: \"SET_INGREDIENTS_FAILED\" =\r\n\t\"SET_INGREDIENTS_FAILED\";\r\n\r\nexport const setOrder: AppThunk = (ids) => (dispatch: AppDispatch) => {\r\n\tdispatch(setOrderRequestAction());\r\n\tsetOrderData(ids)\r\n\t\t.then((response) => {\r\n\t\t\tdispatch(\r\n\t\t\t\tsetOrderSuccessAction(response.name, response.order?.number)\r\n\t\t\t);\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tdispatch(setOrderFailedAction());\r\n\t\t});\r\n};\r\n","import {\r\n\tSET_ORDER_FAILED,\r\n\tSET_ORDER_REQUEST, SET_ORDER_SUCCESS\r\n} from \"../action-types/order\";\r\n\r\nexport interface ISetOrderSuccessAction{\r\n\ttype: typeof SET_ORDER_SUCCESS,\r\n\tname: string,\r\n\torderNumber: number | null\r\n}\r\n\r\nexport interface ISetOrderFailedAction{\r\n\ttype: typeof SET_ORDER_FAILED,\r\n\tmessage: string\r\n}\r\n\r\nexport interface ISetOrderRequestAction{\r\n\ttype: typeof SET_ORDER_REQUEST\r\n}\r\n\r\nexport type TOrderAction = ISetOrderSuccessAction\r\n| ISetOrderFailedAction\r\n| ISetOrderRequestAction;\r\n\r\n\r\nexport const setOrderSuccessAction = (name: string, number: number | null): ISetOrderSuccessAction => {\r\n\treturn {\r\n\t\ttype: SET_ORDER_SUCCESS,\r\n\t\tname: name,\r\n\t\torderNumber: number,\r\n\t};\r\n}\r\n\r\nexport const setOrderFailedAction = (message = \"Что-то пошло не так\"): ISetOrderFailedAction => {\r\n\treturn {\r\n\t\ttype: SET_ORDER_FAILED,\r\n\t\tmessage: message,\r\n\t};\r\n}\r\n\r\nexport const setOrderRequestAction = ():ISetOrderRequestAction => {\r\n\treturn {\r\n\t\ttype: SET_ORDER_REQUEST,\r\n\t};\r\n}\r\n","import { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { FC, useRef } from 'react';\r\nimport { DropTargetMonitor, useDrag, useDrop } from 'react-dnd';\r\nimport { useDispatch } from 'react-redux';\r\nimport { removeBurgerIngredientFromConstructorAction } from '../../services/action-creators/burger-constructor-ingredients';\r\n\r\ninterface IBurgerConstructorItem{\r\n\tname: string;\r\n\tprice: number;\r\n\titem_key: string;\r\n\timage_mobile: string;\r\n\ttype?: \"top\" | \"bottom\" | undefined;\r\n\tdraggable?: boolean;\r\n\tindex?: number;\r\n\tmoveItem?: (dragIndex: number, dropIndex: number) => void\r\n}\r\n\r\ntype DragItem = {\r\n\tindex: number\r\n}\r\n\r\nexport const BurgerConstructorItem : FC<IBurgerConstructorItem>= ({name, price, item_key, image_mobile, type = undefined, draggable, index, moveItem}) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst removeItem = ()=>{\r\n\t\tdispatch(removeBurgerIngredientFromConstructorAction(item_key));\r\n\t}\r\n\r\n\tconst ref = useRef<HTMLDivElement>(null)\r\n\tconst [, drop] = useDrop({\r\n\t  accept: \"burgerIngredientItem\",\r\n\t  hover(item: DragItem, monitor: DropTargetMonitor) {\r\n\t\tif (!ref.current) {\r\n\t\t  return\r\n\t\t}\r\n\t\tconst dragIndex = item.index\r\n\t\tconst dropIndex = index;\r\n\t\tif (dragIndex === dropIndex) {\r\n\t\t  return\r\n\t\t}\r\n\t\tif(moveItem && dropIndex)\r\n\t\t{\r\n\t\t\tmoveItem(dragIndex, dropIndex)\r\n\t\t\titem.index = dropIndex\r\n\t\t}\r\n\t  },\r\n\t})\r\n\tconst [{ isDragging }, drag] = useDrag({\r\n\t  type: \"burgerIngredientItem\",\r\n\t  item: () => {\r\n\t\treturn { item_key, index }\r\n\t  },\r\n\t  collect: (monitor) => ({\r\n\t\tisDragging: monitor.isDragging(),\r\n\t  }),\r\n\t})\r\n\tdrag(drop(ref))\r\n\treturn (\r\n\t\t<div ref={draggable ? ref : null} className='mt-4 mb-4' style={{ display: 'flex', alignItems: 'center', gap: 10 }}>\r\n\t\t\t{draggable ? <DragIcon type=\"primary\" /> : <span className='mr-6'></span>}\r\n\t\t\t<ConstructorElement\r\n\t\t\t\ttype={type}\r\n\t\t\t\ttext={name}\r\n\t\t\t\tprice={price}\r\n\t\t\t\tthumbnail={image_mobile}\r\n\t\t\t\thandleClose = {removeItem}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n} \r\n","import {\r\n\tADD_BURGER_INGREDIENT_IN_CONSTRUCTOR,\r\n\tUPDATE_BURGER_BUN_IN_CONSTRUCTOR,\r\n\tSET_ORDER_BURGER_INGREDIENTS_CONSTRUCTOR,\r\n\tREMOVE_BURGER_INGREDIENT_FROM_CONSTRUCTOR,\r\n\tCLEAR_BURGER_INGREDIENTS_FROM_CONSTRUCTOR,\r\n} from \"../action-types/burger-constructor-ingredients\";\r\nimport { IIngredientDetails } from \"../types/ingredient\";\r\n\r\nexport interface IAddBurgerIngredientToConstructorAction {\r\n\ttype: typeof ADD_BURGER_INGREDIENT_IN_CONSTRUCTOR;\r\n\titem: IIngredientDetails & { key?: string };\r\n}\r\n\r\nexport interface IUpdateBurgerIngredientToConstructorAction {\r\n\ttype: typeof UPDATE_BURGER_BUN_IN_CONSTRUCTOR;\r\n\tcurrentBun: IIngredientDetails;\r\n}\r\n\r\nexport interface ISetOrderBurgerIngredientsAction {\r\n\ttype: typeof SET_ORDER_BURGER_INGREDIENTS_CONSTRUCTOR;\r\n\tdropIndex: number;\r\n\tdragIndex: number;\r\n}\r\n\r\nexport interface IRemoveBurgerIngredientFromConstructorAction {\r\n\ttype: typeof REMOVE_BURGER_INGREDIENT_FROM_CONSTRUCTOR;\r\n\tkey: string;\r\n}\r\n\r\nexport interface IClearBurgerIngredientsFromConstructorAction {\r\n\ttype: typeof CLEAR_BURGER_INGREDIENTS_FROM_CONSTRUCTOR;\r\n}\r\n\r\nexport type TBurgerConstructorIngredientsAction =\r\n\t| IAddBurgerIngredientToConstructorAction\r\n\t| IUpdateBurgerIngredientToConstructorAction\r\n\t| ISetOrderBurgerIngredientsAction\r\n\t| IRemoveBurgerIngredientFromConstructorAction\r\n\t| IClearBurgerIngredientsFromConstructorAction;\r\n\r\nexport const addBurgerIngredientToConstructorAction = (\r\n\titem: IIngredientDetails,\r\n\tkey: string\r\n): IAddBurgerIngredientToConstructorAction => {\r\n\treturn {\r\n\t\ttype: ADD_BURGER_INGREDIENT_IN_CONSTRUCTOR,\r\n\t\titem: { ...item, key },\r\n\t};\r\n};\r\n\r\nexport const updateBurgerIngredientToConstructorAction = (\r\n\titem: IIngredientDetails\r\n): IUpdateBurgerIngredientToConstructorAction => {\r\n\treturn {\r\n\t\ttype: UPDATE_BURGER_BUN_IN_CONSTRUCTOR,\r\n\t\tcurrentBun: item,\r\n\t};\r\n};\r\n\r\nexport const setOrderBurgerIngredientsAction = (\r\n\tdropIndex: number,\r\n\tdragIndex: number\r\n): ISetOrderBurgerIngredientsAction => {\r\n\treturn {\r\n\t\ttype: SET_ORDER_BURGER_INGREDIENTS_CONSTRUCTOR,\r\n\t\tdropIndex,\r\n\t\tdragIndex,\r\n\t};\r\n};\r\n\r\nexport const removeBurgerIngredientFromConstructorAction = (\r\n\titem_key: string\r\n): IRemoveBurgerIngredientFromConstructorAction => {\r\n\treturn {\r\n\t\ttype: REMOVE_BURGER_INGREDIENT_FROM_CONSTRUCTOR,\r\n\t\tkey: item_key,\r\n\t};\r\n};\r\n\r\nexport const clearBurgerIngredientsFromConstructorAction =\r\n\t(): IClearBurgerIngredientsFromConstructorAction => {\r\n\t\treturn {\r\n\t\t\ttype: CLEAR_BURGER_INGREDIENTS_FROM_CONSTRUCTOR,\r\n\t\t};\r\n\t};\r\n","export default __webpack_public_path__ + \"static/media/done.fd977731.svg\";","import doneImg from \"../../images/done.svg\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nexport const OrderSendNotify = () => {\r\n\tconst order = useSelector((state) => {\r\n\t\treturn state.order;\r\n\t});\r\n\treturn (\r\n\t\t<div className=\"text_align_center\" data-testid=\"order-number\">\r\n\t\t\t{!order.orderRequestFailed && !order.orderRequest && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"text text_type_digits-large\">\r\n\t\t\t\t\t\t{order.orderNumber}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"pt-8 text text_type_main-medium\">\r\n\t\t\t\t\t\tВаш заказ начали готовить\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"pt-15\">\r\n\t\t\t\t\t\t<img src={doneImg} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"pt-15 text text_type_main-default\">\r\n\t\t\t\t\t\tВаш заказ начали готовить\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"text text_type_main-default text_color_inactive\">\r\n\t\t\t\t\t\tДождитесь готовности на орбитальной станции\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{order.orderRequestFailed == true && (\r\n\t\t\t\t<div>{order.errorMessage}</div>\r\n\t\t\t)}\r\n\t\t\t{order.orderRequest == true && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"pt-8 text text_type_main-medium pb-8\">\r\n\t\t\t\t\t\tЗаказ формируется...\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import {\r\n\tButton,\r\n\tCurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { IIngredientDetails } from \"../../services/types/ingredient\";\r\nimport {\r\n\taddBurgerIngredientToConstructorAction,\r\n\tclearBurgerIngredientsFromConstructorAction,\r\n\tsetOrderBurgerIngredientsAction,\r\n\tupdateBurgerIngredientToConstructorAction,\r\n} from \"../../services/action-creators/burger-constructor-ingredients\";\r\nimport { setOrderFailedAction } from \"../../services/action-creators/order\";\r\nimport { setOrder } from \"../../services/action-types/order\";\r\nimport { getUser } from \"../../services/action-types/user\";\r\nimport { BurgerConstructorItem } from \"../burger-constructor-item/burger-constructor-item\";\r\nimport { Modal } from \"../modal/modal\";\r\nimport { OrderSendNotify } from \"../order-send-notify/order-send-notify\";\r\nimport style from \"./burger-constructor.module.css\";\r\nimport { AppDataWithCurrency } from \"../app-price/app-price\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\nimport { kMaxLength } from \"buffer\";\r\n\r\nexport const BurgerConstructor = () => {\r\n\tconst [bunTop, bunBottom] = useSelector((state) => {\r\n\t\treturn [\r\n\t\t\tstate.burgerConstructorIngredients.bun,\r\n\t\t\tstate.burgerConstructorIngredients.bun,\r\n\t\t];\r\n\t});\r\n\r\n\tconst buns: ReadonlyArray<IIngredientDetails> = useSelector((state) => {\r\n\t\treturn state.ingredients.buns;\r\n\t});\r\n\r\n\tconst ingredients: ReadonlyArray<IIngredientDetails> = useSelector(\r\n\t\t(state) => {\r\n\t\t\treturn state.ingredients.items;\r\n\t\t}\r\n\t);\r\n\r\n\tconst burgerIngredients: ReadonlyArray<\r\n\t\tIIngredientDetails & { key?: string }\r\n\t> = useSelector((state) => {\r\n\t\treturn state.burgerConstructorIngredients.items;\r\n\t});\r\n\r\n\tconst user = useSelector((state) => {\r\n\t\treturn state.user;\r\n\t});\r\n\r\n\tconst order = useSelector((state) => {\r\n\t\treturn state.order;\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!user.loaded) {\r\n\t\t\tdispatch(getUser());\r\n\t\t}\r\n\t}, [user.loaded]);\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst [modalVisibility, setModalVisibility] = useState(false);\r\n\r\n\tconst history = useHistory();\r\n\r\n\tconst [, dropTarget] = useDrop({\r\n\t\taccept: \"ingredient\",\r\n\t\tdrop(item: { id: string }) {\r\n\t\t\tconst currentIngredient = ingredients.find(\r\n\t\t\t\t(x) => x._id === item.id\r\n\t\t\t);\r\n\t\t\tif (currentIngredient) {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\taddBurgerIngredientToConstructorAction(\r\n\t\t\t\t\t\tcurrentIngredient,\r\n\t\t\t\t\t\tuuidv4()\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tconst currentBun = buns.find((x) => x._id === item.id);\r\n\t\t\tif (currentBun) {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tupdateBurgerIngredientToConstructorAction(currentBun)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n\r\n\tconst handleOpenModal = useCallback(async () => {\r\n\t\tif (user.loaded && user.data) {\r\n\t\t\tif (bunTop && bunBottom) {\r\n\t\t\t\tconst ids = [\r\n\t\t\t\t\tbunTop._id,\r\n\t\t\t\t\t...burgerIngredients.map((x) => x._id),\r\n\t\t\t\t\tbunBottom._id,\r\n\t\t\t\t];\r\n\t\t\t\tawait dispatch(setOrder(ids));\r\n\t\t\t\tsetModalVisibility(true);\r\n\t\t\t} else {\r\n\t\t\t\tawait dispatch(\r\n\t\t\t\t\tsetOrderFailedAction(\r\n\t\t\t\t\t\t\"Пожалуйста, добавьте булки в бургер\"\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t\tsetModalVisibility(true);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\thistory.replace({ pathname: \"/login\" });\r\n\t\t}\r\n\t}, [burgerIngredients, bunTop, bunBottom, user]);\r\n\r\n\tconst handleCloseModal = useCallback(() => {\r\n\t\tsetModalVisibility(false);\r\n\t\tif (order.orderNumber) {\r\n\t\t\tdispatch(clearBurgerIngredientsFromConstructorAction());\r\n\t\t}\r\n\t}, [order.orderNumber]);\r\n\r\n\tconst totalPrice = useMemo(() => {\r\n\t\tlet burgerBunsPrice = 0;\r\n\t\tif (bunTop && bunBottom) {\r\n\t\t\tburgerBunsPrice = bunTop.price + bunBottom.price;\r\n\t\t}\r\n\t\tconst burgerIngredientsPrice = burgerIngredients.reduce(\r\n\t\t\t(sum, current) => {\r\n\t\t\t\treturn sum + current.price;\r\n\t\t\t},\r\n\t\t\t0\r\n\t\t);\r\n\t\treturn burgerBunsPrice + burgerIngredientsPrice;\r\n\t}, [burgerIngredients, bunTop, bunBottom]);\r\n\r\n\tconst moveItemHandler = useCallback(\r\n\t\t(dragIndex: number, dropIndex: number) => {\r\n\t\t\tdispatch(setOrderBurgerIngredientsAction(dropIndex, dragIndex));\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div ref={dropTarget} data-testid=\"drop-area\">\r\n\t\t\t<div className={style.scroll_container}>\r\n\t\t\t\t{bunTop && (\r\n\t\t\t\t\t<BurgerConstructorItem\r\n\t\t\t\t\t\tkey=\"bunTop\"\r\n\t\t\t\t\t\titem_key=\"bunTop\"\r\n\t\t\t\t\t\tdraggable={false}\r\n\t\t\t\t\t\tname={bunTop.name}\r\n\t\t\t\t\t\tprice={bunTop.price}\r\n\t\t\t\t\t\ttype=\"top\"\r\n\t\t\t\t\t\timage_mobile={bunTop.image_mobile}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t\t{burgerIngredients.map((x, index: number) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<BurgerConstructorItem\r\n\t\t\t\t\t\t\tkey={x.key}\r\n\t\t\t\t\t\t\titem_key={x.key || index.toString()}\r\n\t\t\t\t\t\t\tdraggable={true}\r\n\t\t\t\t\t\t\tname={x.name}\r\n\t\t\t\t\t\t\tprice={x.price}\r\n\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\timage_mobile={x.image_mobile}\r\n\t\t\t\t\t\t\tmoveItem={moveItemHandler}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t\t{bunBottom && (\r\n\t\t\t\t\t<BurgerConstructorItem\r\n\t\t\t\t\t\tkey=\"bunBottom\"\r\n\t\t\t\t\t\titem_key=\"bunBottom\"\r\n\t\t\t\t\t\tdraggable={false}\r\n\t\t\t\t\t\tname={bunBottom.name}\r\n\t\t\t\t\t\tprice={bunBottom.price}\r\n\t\t\t\t\t\ttype=\"bottom\"\r\n\t\t\t\t\t\timage_mobile={bunBottom.image_mobile}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"mt-10 text-align-right total_price_container display_flex display_flex-center\">\r\n\t\t\t\t<div className=\"mr-10 text text_type_digits-medium\">\r\n\t\t\t\t\t<AppDataWithCurrency data={totalPrice} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button\r\n\t\t\t\t\thtmlType=\"button\"\r\n\t\t\t\t\tonClick={handleOpenModal}\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t>\r\n\t\t\t\t\tОформить заказ\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t{modalVisibility && (\r\n\t\t\t\t<Modal header=\"\" onClose={handleCloseModal}>\r\n\t\t\t\t\t<OrderSendNotify />\r\n\t\t\t\t</Modal>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import {\r\n\tCounter,\r\n\tCurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC } from \"react\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport { IIngredientDetails } from \"../../services/types/ingredient\";\r\nimport { AppDataWithCurrency } from \"../app-price/app-price\";\r\n\r\ninterface IBurgerIngredient {\r\n\tcount: number;\r\n\tid: string;\r\n\tcaption: string;\r\n\tdescription: string;\r\n\timgSrc: string;\r\n\thandleOpenModal: (event: React.MouseEvent<HTMLElement>) => void;\r\n}\r\n\r\nexport const BurgerIngredient: FC<IBurgerIngredient> = ({\r\n\tcount,\r\n\timgSrc,\r\n\tdescription,\r\n\tcaption,\r\n\thandleOpenModal,\r\n\tid,\r\n}) => {\r\n\tconst [, dragRef] = useDrag({\r\n\t\ttype: \"ingredient\",\r\n\t\titem: { id: id },\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tdraggable\r\n\t\t\tref={dragRef}\r\n\t\t\tclassName=\"mb-8 position_relative\"\r\n\t\t\tonClick={handleOpenModal}\r\n\t\t\tdata-testid=\"draggable-item\"\r\n\t\t>\r\n\t\t\t{count > 0 && <Counter count={count} size=\"default\" />}\r\n\t\t\t<div className=\"text_align_center pl-4 pr-4\">\r\n\t\t\t\t<img src={imgSrc} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"text text_type_digits-default pt-1 pb-1 text_align_center\">\r\n\t\t\t\t<AppDataWithCurrency data={description} />\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tdata-testid=\"current-ingredient-name\"\r\n\t\t\t\tclassName=\"text_align_center text text_type_main-default\"\r\n\t\t\t>\r\n\t\t\t\t{caption}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { number } from \"prop-types\";\r\nimport {\r\n\tRefObject,\r\n\tUIEvent,\r\n\tuseCallback,\r\n\tuseMemo,\r\n\tuseRef,\r\n\tuseState,\r\n} from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { IIngredientDetails } from \"../../services/types/ingredient\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\nimport { BurgerIngredient } from \"../burger-ingredient/burger-ingredient\";\r\nimport style from \"./burger-ingredients.module.css\";\r\n\r\ninterface IGroupedIngredients {\r\n\t[name: string]: Array<IIngredientDetails>;\r\n}\r\n\r\nconst getCaption = (type: string) => {\r\n\tswitch (type) {\r\n\t\tcase \"bun\":\r\n\t\t\treturn \"Булки\";\r\n\t\tcase \"main\":\r\n\t\t\treturn \"Начинки\";\r\n\t\tcase \"sauce\":\r\n\t\t\treturn \"Соусы\";\r\n\t}\r\n};\r\n\r\nexport const BurgerIngredients = () => {\r\n\tconst [current, setCurrent] = useState<string>(\"bun\");\r\n\r\n\tconst buns = useSelector((state) => {\r\n\t\treturn state.ingredients.buns;\r\n\t});\r\n\tconst items = useSelector((state) => {\r\n\t\treturn state.ingredients.items;\r\n\t});\r\n\r\n\tconst burgerConstructorIngredients = useSelector((state) => {\r\n\t\tconst ingredientsWithBuns = [\r\n\t\t\t...state.burgerConstructorIngredients.items,\r\n\t\t];\r\n\t\tif (state.burgerConstructorIngredients.bun) {\r\n\t\t\tingredientsWithBuns.push(state.burgerConstructorIngredients.bun);\r\n\t\t\tingredientsWithBuns.push(state.burgerConstructorIngredients.bun);\r\n\t\t}\r\n\t\treturn ingredientsWithBuns.reduce((acc, item) => {\r\n\t\t\tif (acc[item._id]) {\r\n\t\t\t\tacc[item._id]++;\r\n\t\t\t} else {\r\n\t\t\t\tacc[item._id] = 1;\r\n\t\t\t}\r\n\t\t\treturn acc;\r\n\t\t}, {} as Record<string, number>);\r\n\t});\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst history = useHistory();\r\n\r\n\tconst handleOpenModal = useCallback(\r\n\t\t(ingredient: IIngredientDetails) => {\r\n\t\t\thistory.push({\r\n\t\t\t\tpathname: `/ingredients/${ingredient._id}`,\r\n\t\t\t\tstate: { isModal: true },\r\n\t\t\t});\r\n\t\t},\r\n\t\t[dispatch]\r\n\t);\r\n\r\n\tconst groupedIngredients = useMemo<IGroupedIngredients>(() => {\r\n\t\tconst groupedIngredients = [...buns, ...items].reduce(\r\n\t\t\t(acc, current) => {\r\n\t\t\t\tacc[current.type].push(current);\r\n\t\t\t\treturn acc;\r\n\t\t\t},\r\n\t\t\t{ bun: [], sauce: [], main: [] } as IGroupedIngredients\r\n\t\t);\r\n\t\treturn groupedIngredients;\r\n\t}, [buns, items]);\r\n\r\n\tconst handleScroll = useCallback((e: UIEvent<HTMLDivElement>) => {\r\n\t\tconst scrollTop = (e.target as HTMLDivElement).scrollTop;\r\n\t\tconst range = {\r\n\t\t\tminHeight: 0,\r\n\t\t\tmaxHeight: (refBun.current as HTMLDivElement).clientHeight,\r\n\t\t};\r\n\t\tObject.keys(groupedIngredients).every((type) => {\r\n\t\t\tif (\r\n\t\t\t\trange.minHeight <= scrollTop &&\r\n\t\t\t\trange.maxHeight >= scrollTop\r\n\t\t\t) {\r\n\t\t\t\tsetCurrent(type);\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst currentRef = getRef(type);\r\n\t\t\t\trange.minHeight += (\r\n\t\t\t\t\tcurrentRef.current as HTMLDivElement\r\n\t\t\t\t).clientHeight;\r\n\t\t\t\trange.maxHeight += (\r\n\t\t\t\t\tcurrentRef.current as HTMLDivElement\r\n\t\t\t\t).clientHeight;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst refBun = useRef<HTMLDivElement>(null);\r\n\tconst refMain = useRef<HTMLDivElement>(null);\r\n\tconst refSauce = useRef<HTMLDivElement>(null);\r\n\r\n\tconst getRef = (type: string) => {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"bun\":\r\n\t\t\t\treturn refBun;\r\n\t\t\tcase \"main\":\r\n\t\t\t\treturn refMain;\r\n\t\t\tcase \"sauce\":\r\n\t\t\t\treturn refSauce;\r\n\t\t\tdefault:\r\n\t\t\t\treturn refBun;\r\n\t\t}\r\n\t};\r\n\r\n\tconst goToBlock = (ref: RefObject<HTMLDivElement>, type: string) => {\r\n\t\tsetCurrent(type);\r\n\t\tref.current?.scrollIntoView({ behavior: \"smooth\" });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1 className=\"text text_type_main-large mb-5\">\r\n\t\t\t\tСоберите бургер\r\n\t\t\t</h1>\r\n\t\t\t<div className=\"tabs\" style={{ display: \"flex\" }}>\r\n\t\t\t\t<Tab\r\n\t\t\t\t\tvalue=\"bun\"\r\n\t\t\t\t\tactive={current === \"bun\"}\r\n\t\t\t\t\tonClick={() => goToBlock(refBun, \"bun\")}\r\n\t\t\t\t>\r\n\t\t\t\t\tБулки\r\n\t\t\t\t</Tab>\r\n\t\t\t\t<Tab\r\n\t\t\t\t\tvalue=\"sauce\"\r\n\t\t\t\t\tactive={current === \"sauce\"}\r\n\t\t\t\t\tonClick={() => goToBlock(refSauce, \"sauce\")}\r\n\t\t\t\t>\r\n\t\t\t\t\tСоусы\r\n\t\t\t\t</Tab>\r\n\t\t\t\t<Tab\r\n\t\t\t\t\tvalue=\"main\"\r\n\t\t\t\t\tactive={current === \"main\"}\r\n\t\t\t\t\tonClick={() => goToBlock(refMain, \"main\")}\r\n\t\t\t\t>\r\n\t\t\t\t\tНачинки\r\n\t\t\t\t</Tab>\r\n\t\t\t</div>\r\n\t\t\t<div className={style.scroll_container} onScroll={handleScroll}>\r\n\t\t\t\t{Object.entries(groupedIngredients).map(([key, value]) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={key} ref={getRef(key)}>\r\n\t\t\t\t\t\t\t<h2 className=\"pb-6 pt-10 text text_type_main-medium\">\r\n\t\t\t\t\t\t\t\t{getCaption(key)}\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t<div className=\"display_flex flex-wrap pl-4 pr-4 pb-10\">\r\n\t\t\t\t\t\t\t\t{value.map((x, i) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ flex: 1 }}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={x._id}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<BurgerIngredient\r\n\t\t\t\t\t\t\t\t\t\t\t\tid={x._id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcount={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tburgerConstructorIngredients[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tx._id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t] ?? 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\thandleOpenModal={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleOpenModal(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tx\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription=\"20\"\r\n\t\t\t\t\t\t\t\t\t\t\t\timgSrc={x.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcaption={x.name}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { BurgerConstructor } from \"../burger-constructor/burger-constructor\";\r\nimport { BurgerIngredients } from \"../burger-ingredients/burger-ingredients\";\r\n\r\nexport const AppBody = () => {\r\n\treturn (\r\n\t\t<main className=\"display_flex\">\r\n\t\t\t<DndProvider backend={HTML5Backend}>\r\n\t\t\t\t<div className=\"width_50_percent\">\r\n\t\t\t\t\t<BurgerIngredients />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mt-25 ml-10\">\r\n\t\t\t\t\t<BurgerConstructor />\r\n\t\t\t\t</div>\r\n\t\t\t</DndProvider>\r\n\t\t</main>\r\n\t);\r\n};\r\n","import {\r\n\tBurgerIcon,\r\n\tListIcon,\r\n\tLogo,\r\n\tProfileIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { AppNavItem } from \"../app-nav-item/app-nav-item\";\r\n\r\nexport default function AppHeader() {\r\n\treturn (\r\n\t\t<header className=\"pt-10 pb-10\">\r\n\t\t\t<nav className=\"display_flex display_flex_space_between\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<AppNavItem\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tclassName=\"p-5 mr-2 text text_type_main-default\"\r\n\t\t\t\t\t\tpath=\"/\"\r\n\t\t\t\t\t\ttext=\"Конструктор\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span className=\"mr-2\">\r\n\t\t\t\t\t\t\t<BurgerIcon type=\"primary\" />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</AppNavItem>\r\n\t\t\t\t\t<AppNavItem\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tclassName=\"p-5 mr-2 text text_type_main-default\"\r\n\t\t\t\t\t\tpath=\"/feed\"\r\n\t\t\t\t\t\ttext=\"Лента заказов\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span className=\"mr-2\">\r\n\t\t\t\t\t\t\t<ListIcon type=\"primary\" />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</AppNavItem>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Logo />\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<AppNavItem\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tclassName=\"p-5 mr-2 text text_type_main-default\"\r\n\t\t\t\t\t\tpath=\"/profile\"\r\n\t\t\t\t\t\ttext=\"Личный кабинет\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span className=\"mr-2\">\r\n\t\t\t\t\t\t\t<ProfileIcon type=\"primary\" />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</AppNavItem>\r\n\t\t\t\t</div>\r\n\t\t\t</nav>\r\n\t\t</header>\r\n\t);\r\n}\r\n","import { FC } from 'react';\r\n\r\nexport const AppLoad : FC<{text: string}> = ({text})=>{\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{text}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n","import { FC, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router\";\r\nimport {\r\n\tIRouterParams,\r\n\tTRouteForUnauthorizedUsers,\r\n} from \"../../services/types/routing\";\r\nimport { getUser } from \"../../services/action-types/user\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nexport const RouteForUnauthorizedUsers: FC<\r\n\tTRouteForUnauthorizedUsers<IRouterParams>\r\n> = ({ children, ...rest }) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst user = useSelector((state) => {\r\n\t\treturn state.user;\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!user.loaded) {\r\n\t\t\tdispatch(getUser());\r\n\t\t}\r\n\t}, []);\r\n\r\n\tif (user.loaded) {\r\n\t\treturn (\r\n\t\t\t<Route\r\n\t\t\t\t{...rest}\r\n\t\t\t\trender={({ location }) =>\r\n\t\t\t\t\tuser.data ? (\r\n\t\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\tpathname: \"/\",\r\n\t\t\t\t\t\t\t\tstate: { from: location },\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tchildren\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t);\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n};\r\n","import { FC, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router\";\r\nimport {\r\n\tIRouterParams,\r\n\tTRouteForUnauthorizedUsers,\r\n} from \"../../services/types/routing\";\r\nimport { getUser } from \"../../services/action-types/user\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nexport const ProtectedRoute: FC<TRouteForUnauthorizedUsers<IRouterParams>> = ({\r\n\tchildren,\r\n\t...rest\r\n}) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst user = useSelector((state) => {\r\n\t\treturn state.user;\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(getUser());\r\n\t}, []);\r\n\r\n\tif (user.loaded) {\r\n\t\treturn (\r\n\t\t\t<Route\r\n\t\t\t\t{...rest}\r\n\t\t\t\trender={({ location }) =>\r\n\t\t\t\t\tuser.data ? (\r\n\t\t\t\t\t\tchildren\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\tpathname: \"/login\",\r\n\t\t\t\t\t\t\t\tstate: { from: location },\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t);\r\n\t} else {\r\n\t\treturn <div>Загрузка данных...</div>;\r\n\t}\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport {\r\n\tForgotPasswordPage,\r\n\tIngredientPage,\r\n\tLoginPage,\r\n\tProfileContainerPage,\r\n\tProfileOrdersPage,\r\n\tProfilePage,\r\n\tRegisterPage,\r\n\tResetPasswordPage,\r\n} from \"../../pages\";\r\nimport { FeedPage } from \"../../pages/feed/feed\";\r\nimport { FeedDetailsPage } from \"../../pages/feed/feed-details/feed-details\";\r\nimport { getIngredients } from \"../../services/action-types/burger-ingredients\";\r\nimport { useAppDispatch } from \"../../utils/api/request-api-helpers\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\nimport { AppBody } from \"../app-body/app-body\";\r\nimport { AppError } from \"../app-error/app-error\";\r\nimport AppHeader from \"../app-header/app-header\";\r\nimport { AppLoad } from \"../app-load/app-load\";\r\nimport { RouteForUnauthorizedUsers } from \"../not-authorized-route/not-authorized-route\";\r\nimport { ProtectedRoute } from \"../protected-route/protected-route\";\r\nimport \"./app.css\";\r\n\r\nfunction App() {\r\n\tconst { ingredientsRequestFailed, ingredientsRequest, error } =\r\n\t\tuseSelector((state) => {\r\n\t\t\treturn state.ingredients;\r\n\t\t});\r\n\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(getIngredients());\r\n\t}, [dispatch]);\r\n\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<Router>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path=\"/\" exact>\r\n\t\t\t\t\t\t<AppHeader />\r\n\t\t\t\t\t\t{ingredientsRequestFailed ? (\r\n\t\t\t\t\t\t\t<AppError error={error} />\r\n\t\t\t\t\t\t) : ingredientsRequest ? (\r\n\t\t\t\t\t\t\t<AppLoad text=\"Идет загрузка данных...\" />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<AppBody />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/feed\" exact>\r\n\t\t\t\t\t\t<AppHeader />\r\n\t\t\t\t\t\t<FeedPage />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/feed/:id\" exact>\r\n\t\t\t\t\t\t<AppHeader />\r\n\t\t\t\t\t\t<FeedDetailsPage />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<RouteForUnauthorizedUsers path=\"/login\" exact>\r\n\t\t\t\t\t\t<LoginPage />\r\n\t\t\t\t\t</RouteForUnauthorizedUsers>\r\n\t\t\t\t\t<RouteForUnauthorizedUsers path=\"/register\" exact>\r\n\t\t\t\t\t\t<RegisterPage />\r\n\t\t\t\t\t</RouteForUnauthorizedUsers>\r\n\t\t\t\t\t<RouteForUnauthorizedUsers\r\n\t\t\t\t\t\tpath=\"/forgot-password\"\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ForgotPasswordPage />\r\n\t\t\t\t\t</RouteForUnauthorizedUsers>\r\n\t\t\t\t\t<RouteForUnauthorizedUsers\r\n\t\t\t\t\t\tpath=\"/reset-password\"\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ResetPasswordPage />\r\n\t\t\t\t\t</RouteForUnauthorizedUsers>\r\n\t\t\t\t\t<ProtectedRoute path={\"/profile\"} exact>\r\n\t\t\t\t\t\t<AppHeader />\r\n\t\t\t\t\t\t<ProfileContainerPage>\r\n\t\t\t\t\t\t\t<ProfilePage />\r\n\t\t\t\t\t\t</ProfileContainerPage>\r\n\t\t\t\t\t</ProtectedRoute>\r\n\t\t\t\t\t<ProtectedRoute path={\"/profile/orders\"} exact>\r\n\t\t\t\t\t\t<AppHeader />\r\n\t\t\t\t\t\t<ProfileContainerPage>\r\n\t\t\t\t\t\t\t<ProfileOrdersPage />\r\n\t\t\t\t\t\t</ProfileContainerPage>\r\n\t\t\t\t\t</ProtectedRoute>\r\n\t\t\t\t\t<ProtectedRoute path={\"/profile/orders/:id\"} exact>\r\n\t\t\t\t\t\t<AppHeader />\r\n\t\t\t\t\t\t<FeedDetailsPage />\r\n\t\t\t\t\t</ProtectedRoute>\r\n\t\t\t\t\t<Route path=\"/ingredients/:id\" exact>\r\n\t\t\t\t\t\t<AppHeader />\r\n\t\t\t\t\t\t<IngredientPage />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { TBurgerIngredientsAction } from \"../action-creators/burger-ingredients\";\r\nimport {\r\n\tGET_INGREDIENTS_REQUEST,\r\n\tGET_INGREDIENTS_SUCCESS,\r\n\tGET_INGREDIENTS_FAILED,\r\n} from \"../action-types/burger-ingredients\";\r\nimport { IIngredientDetails } from \"../types/ingredient\";\r\n\r\nexport interface IInitialIngredientsState {\r\n\titems: ReadonlyArray<IIngredientDetails>;\r\n\tbuns: ReadonlyArray<IIngredientDetails>;\r\n\tingredientsRequest: boolean;\r\n\tingredientsRequestFailed: boolean;\r\n\terror: string;\r\n}\r\n\r\nexport const initialIngredientsState: IInitialIngredientsState = {\r\n\titems: [],\r\n\tbuns: [],\r\n\tingredientsRequest: false,\r\n\tingredientsRequestFailed: false,\r\n\terror: \"\",\r\n};\r\n\r\nexport default function burgerIngredientsReducer(\r\n\tstate = initialIngredientsState,\r\n\taction: TBurgerIngredientsAction\r\n): IInitialIngredientsState {\r\n\tswitch (action.type) {\r\n\t\tcase GET_INGREDIENTS_REQUEST: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tingredientsRequest: true,\r\n\t\t\t\tingredientsRequestFailed: false,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase GET_INGREDIENTS_SUCCESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\titems: action.ingredients.filter((x) => x.type !== \"bun\"),\r\n\t\t\t\tbuns: action.ingredients.filter((x) => x.type === \"bun\"),\r\n\t\t\t\tingredientsRequest: false,\r\n\t\t\t\tingredientsRequestFailed: false,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase GET_INGREDIENTS_FAILED: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tingredientsRequest: false,\r\n\t\t\t\tingredientsRequestFailed: true,\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { TOrderAction } from \"../action-creators/order\";\r\nimport {\r\n\tSET_ORDER_FAILED,\r\n\tSET_ORDER_REQUEST,\r\n\tSET_ORDER_SUCCESS,\r\n} from \"../action-types/order\";\r\n\r\nexport interface IInitialOrderState {\r\n\tname: string;\r\n\torderNumber: number | null;\r\n\torderRequest: boolean;\r\n\torderRequestFailed: boolean;\r\n\terrorMessage: string | null;\r\n}\r\n\r\nexport const initialOrderState: IInitialOrderState = {\r\n\tname: \"\",\r\n\torderNumber: null,\r\n\torderRequest: false,\r\n\torderRequestFailed: false,\r\n\terrorMessage: null,\r\n};\r\n\r\nexport default function orderReducer(\r\n\tstate = initialOrderState,\r\n\taction: TOrderAction\r\n): IInitialOrderState {\r\n\tswitch (action.type) {\r\n\t\tcase SET_ORDER_REQUEST: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\torderRequest: true,\r\n\t\t\t\torderRequestFailed: false,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SET_ORDER_SUCCESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tname: action.name,\r\n\t\t\t\torderNumber: action.orderNumber,\r\n\t\t\t\torderRequest: false,\r\n\t\t\t\torderRequestFailed: false,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SET_ORDER_FAILED: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\torderRequest: false,\r\n\t\t\t\torderRequestFailed: true,\r\n\t\t\t\terrorMessage: action.message,\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { stat } from \"fs\";\r\nimport { TBurgerConstructorIngredientsAction } from \"../action-creators/burger-constructor-ingredients\";\r\nimport {\r\n\tADD_BURGER_INGREDIENT_IN_CONSTRUCTOR,\r\n\tREMOVE_BURGER_INGREDIENT_FROM_CONSTRUCTOR,\r\n\tUPDATE_BURGER_BUN_IN_CONSTRUCTOR,\r\n\tSET_ORDER_BURGER_INGREDIENTS_CONSTRUCTOR,\r\n\tCLEAR_BURGER_INGREDIENTS_FROM_CONSTRUCTOR,\r\n} from \"../action-types/burger-constructor-ingredients\";\r\nimport { IIngredientDetails } from \"../types/ingredient\";\r\n\r\nexport interface IInitialBurgerConstructorIngredientsState {\r\n\titems: ReadonlyArray<IIngredientDetails & { key?: string }>;\r\n\tbun: IIngredientDetails | null;\r\n}\r\n\r\nexport const initialBurgerConstructorIngredientsState: IInitialBurgerConstructorIngredientsState =\r\n\t{\r\n\t\titems: [],\r\n\t\tbun: null,\r\n\t};\r\n\r\nexport default function burgerConstructorIngredientsReducer(\r\n\tstate = initialBurgerConstructorIngredientsState,\r\n\taction: TBurgerConstructorIngredientsAction\r\n): IInitialBurgerConstructorIngredientsState {\r\n\tswitch (action.type) {\r\n\t\tcase ADD_BURGER_INGREDIENT_IN_CONSTRUCTOR: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\titems: [...state.items, { ...action.item }],\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase REMOVE_BURGER_INGREDIENT_FROM_CONSTRUCTOR: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\titems: state.items.filter((x) => x.key !== action.key),\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase UPDATE_BURGER_BUN_IN_CONSTRUCTOR: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tbun: { ...action.currentBun },\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SET_ORDER_BURGER_INGREDIENTS_CONSTRUCTOR: {\r\n\t\t\tconst droppedItem = state.items[action.dropIndex];\r\n\t\t\tconst draggedItem = state.items[action.dragIndex];\r\n\t\t\tlet newItems = [...state.items];\r\n\t\t\tnewItems[action.dropIndex] = draggedItem;\r\n\t\t\tnewItems[action.dragIndex] = droppedItem;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\titems: newItems,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase CLEAR_BURGER_INGREDIENTS_FROM_CONSTRUCTOR: {\r\n\t\t\treturn {\r\n\t\t\t\t...initialBurgerConstructorIngredientsState,\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { TUserAction } from \"../action-creators/user\";\r\nimport {\r\n\tSET_USER_REQUEST,\r\n\tCLEAR_USER,\r\n\tGET_USER_REQUEST,\r\n} from \"../action-types/user\";\r\nimport { IUserData } from \"../types/auth\";\r\n\r\nexport interface IInitialUserState {\r\n\tloaded: boolean;\r\n\tdata: IUserData | null;\r\n\terror: string | null;\r\n}\r\n\r\nexport const initialUserState: IInitialUserState = {\r\n\tloaded: false,\r\n\tdata: null,\r\n\terror: null,\r\n};\r\n\r\nexport default function userReducer(\r\n\tstate = initialUserState,\r\n\taction: TUserAction\r\n) {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USER_REQUEST: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdata: action.user ? { ...action.user } : null,\r\n\t\t\t\tloaded: true,\r\n\t\t\t\terror: action.error || null,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase GET_USER_REQUEST: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\terror: null,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase CLEAR_USER: {\r\n\t\t\treturn {\r\n\t\t\t\t...initialUserState,\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { number } from \"prop-types\";\r\nimport { TWsFeedAction } from \"../action-creators/feed\";\r\n\r\nimport { CFeedItem } from \"../types/feed\";\r\n\r\nexport interface IInitalFeedState {\r\n\tconnected: boolean;\r\n\torders: ReadonlyArray<CFeedItem>;\r\n\ttotal: number | null;\r\n\ttotalToday: number | null;\r\n\tmessage: string | null;\r\n}\r\n\r\nexport const initalFeedState: IInitalFeedState = {\r\n\tconnected: false,\r\n\torders: [],\r\n\ttotal: null,\r\n\ttotalToday: null,\r\n\tmessage: null,\r\n};\r\n\r\nexport default function feedReducer(\r\n\tstate = initalFeedState,\r\n\taction: TWsFeedAction\r\n): IInitalFeedState {\r\n\tswitch (action.type) {\r\n\t\tcase \"WS_FEED_CONNECTION_SUCCESS\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tconnected: true,\r\n\t\t\t};\r\n\t\tcase \"WS_FEED_GET_MESSAGE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\torders: [...action.payload.orders],\r\n\t\t\t\ttotal: action.payload.total,\r\n\t\t\t\ttotalToday: action.payload.totalToday,\r\n\t\t\t};\r\n\t\tcase \"WS_FEED_CONNECTION_CLOSED\": {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmessage: action.payload,\r\n\t\t\t\tconnected: false,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase \"WS_FEED_CONNECTION_ERROR\": {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmessage: `ошибка, тип события ${action.payload.type}`,\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport burgerIngredientsReducer from \"./burger-ingredients\";\r\nimport orderReducer from \"./order\";\r\nimport burgerConstructorIngredientsReducer from \"./burger-constructor-ingredients\";\r\nimport currentIngredientReducer from \"./current-ingredient\";\r\nimport userReducer from \"./user\";\r\nimport feedReducer from \"./feed\";\r\n\r\nexport const rootReducer = combineReducers({\r\n\tingredients: burgerIngredientsReducer,\r\n\tburgerConstructorIngredients: burgerConstructorIngredientsReducer,\r\n\torder: orderReducer,\r\n\tcurrentIngredient: currentIngredientReducer,\r\n\tuser: userReducer,\r\n\tfeed: feedReducer,\r\n});\r\n","import { useDispatch } from \"react-redux\";\r\nimport { Middleware, MiddlewareAPI } from \"redux\";\r\nimport {\r\n\tcloseFeedConnectionAction,\r\n\terrorFeedConnectionAction,\r\n\tgetOpenConnectionAction,\r\n\tsetOrdersAction,\r\n\tTWsFeedAction,\r\n} from \"../action-creators/feed\";\r\nimport {\r\n\tWS_FEED_CONNECTION_CLOSED,\r\n\tWS_FEED_SEND_MESSAGE,\r\n} from \"../action-types/feed\";\r\nimport type { AppDispatch, RootState } from \"../types\";\r\nimport { IFeed } from \"../types/feed\";\r\nimport { wsActionsFeed } from \"../variables/web-socket\";\r\n\r\nexport type TWsAction = {\r\n\t[item in keyof typeof wsActionsFeed]: typeof wsActionsFeed[item];\r\n};\r\n\r\nexport type TDataMessage = IFeed;\r\n\r\nexport function socketMiddleware(wsActions: typeof wsActionsFeed): Middleware {\r\n\treturn (store: MiddlewareAPI<AppDispatch, RootState>) => {\r\n\t\tlet socket: WebSocket | null = null;\r\n\t\tlet socketOpened = false;\r\n\t\tconst { dispatch, getState } = store;\r\n\t\tconst user = getState().user;\r\n\t\treturn (next) => (action: TWsFeedAction) => {\r\n\t\t\tconst { type } = action;\r\n\t\t\tif (type === wsActions.wsInit) {\r\n\t\t\t\tconst url = action.url;\r\n\t\t\t\tsocket = new WebSocket(url);\r\n\t\t\t}\r\n\t\t\tif (socket) {\r\n\t\t\t\tsocket.onopen = (event: Event) => {\r\n\t\t\t\t\tdispatch(getOpenConnectionAction());\r\n\t\t\t\t\tsocketOpened = true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tsocket.onerror = (event) => {\r\n\t\t\t\t\tdispatch(errorFeedConnectionAction(event));\r\n\t\t\t\t};\r\n\r\n\t\t\t\tsocket.onmessage = (event: MessageEvent) => {\r\n\t\t\t\t\tconst { data } = event;\r\n\t\t\t\t\tconst parsedData = JSON.parse(data) as IFeed & {\r\n\t\t\t\t\t\tmessage: string;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (parsedData.success) {\r\n\t\t\t\t\t\tdispatch(setOrdersAction(parsedData));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tcloseFeedConnectionAction(parsedData.message)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tsocket.onclose = (event: CloseEvent) => {\r\n\t\t\t\t\tif (socketOpened) {\r\n\t\t\t\t\t\tdispatch(closeFeedConnectionAction(event.reason));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t`ws with url=${socket?.url} is closed`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (type === WS_FEED_SEND_MESSAGE) {\r\n\t\t\t\t\tconst message = {\r\n\t\t\t\t\t\t...action.payload,\r\n\t\t\t\t\t\ttoken: user.data,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tsocket.send(JSON.stringify(message));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (type === WS_FEED_CONNECTION_CLOSED) {\r\n\t\t\t\t\tsocket.close();\r\n\t\t\t\t\tsocketOpened = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnext(action);\r\n\t\t};\r\n\t};\r\n}\r\n","import { TCurrentIngredientAction } from \"../action-creators/current-ingredient\";\r\nimport { SET_CURRENT_INGREDIENT } from \"../action-types/current-ingredient\";\r\nimport { IIngredientDetails } from \"../types/ingredient\";\r\n\r\nconst initialCurrentIngredientState: IIngredientDetails | null = null;\r\n\r\nexport default function currentIngredientReducer(\r\n\tstate = initialCurrentIngredientState,\r\n\taction: TCurrentIngredientAction\r\n) {\r\n\tswitch (action.type) {\r\n\t\tcase SET_CURRENT_INGREDIENT: {\r\n\t\t\tif (action.item) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\t...action.item,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { applyMiddleware, compose, createStore } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { TWsFeedAction } from \"./action-creators/feed\";\r\nimport { TOrderAction } from \"./action-creators/order\";\r\nimport { socketMiddleware } from \"./middleware/socketMiddleware\";\r\nimport { rootReducer } from \"./reducers/root-reducer\";\r\nimport { IFeed } from \"./types/feed\";\r\nimport {\r\n\tordersAllWsUrl,\r\n\tordersUserWsUrl,\r\n\twsActionsFeed,\r\n} from \"./variables/web-socket\";\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\t__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n\t}\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n\trootReducer,\r\n\tcomposeEnhancers(applyMiddleware(thunk, socketMiddleware(wsActionsFeed)))\r\n);\r\nexport default store;\r\n","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport './index.css';\r\nimport App from './components/app/app';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport store from './services/store';\r\nimport { Provider } from \"react-redux\";\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n  );\r\n\r\n// const root = ReactDOM.createRoot(\r\n//   document.getElementById('root') as HTMLElement\r\n// );\r\n// root.render(\r\n//   <React.StrictMode>\r\n//     <Provider store={store}>\r\n//         <App />\r\n//     </Provider>\r\n//   </React.StrictMode>\r\n// );\r\n\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"a_href_span\":\"app-nav-item_a_href_span__3Xrjo\",\"a_href\":\"app-nav-item_a_href__WWws3\",\"active\":\"app-nav-item_active__1LbtB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatars_list\":\"app-avatar-list_avatars_list__Rvt7K\",\"avatar_container\":\"app-avatar-list_avatar_container__3H9NR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"app-avatar_avatar__2PZ1q\",\"text_bg\":\"app-avatar_text_bg__1qcV5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll_container\":\"feed_scroll_container__1A7s_\"};"],"sourceRoot":""}