(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{111:function(e,t,n){e.exports={width_30_percent:"profile-container_width_30_percent__26goi",active:"profile-container_active__gPOPL"}},112:function(e,t,n){e.exports={modal_overlay:"modal-overlay_modal_overlay__2hps2"}},113:function(e,t,n){e.exports={modal_container:"modal_modal_container__3wlZi",scroll_container:"modal_scroll_container__107A9"}},115:function(e,t,n){e.exports={scroll_container:"profile-orders_scroll_container__1VI5B"}},116:function(e,t,n){e.exports={scroll_container:"feed-details_scroll_container__37jGn"}},117:function(e,t,n){e.exports={feed_details_container:"feed-details_feed_details_container__aTRc9"}},119:function(e,t,n){e.exports={scroll_container:"burger-constructor_scroll_container__3WfN_"}},120:function(e,t,n){e.exports={scroll_container:"burger-ingredients_scroll_container__1Nb63"}},131:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(33),s=n.n(a),i=(n(131),n(14)),o=n(6),u=n(3),l=n(8),d=n(25),j=n(2),b=n(7),p=n(5),m=n(9);function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n=n||{}).expires;if("number"==typeof r&&r){var c=new Date;c.setTime(c.getTime()+1e3*r),r=n.expires=c}r&&r.toUTCString&&(n.expires=r.toUTCString()),t&&(t=encodeURIComponent(t));var a=e+"="+t;for(var s in n){a+="; "+s;var i=n[s];!0!==i&&(a+="="+i)}document.cookie=a}function f(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function x(e){O(e,null,{expires:-1})}var h=m.b;function _(e){return e.ok?e.json():Promise.reject(e.status)}function v(e){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(Object(u.a)().mark((function e(t){var n,r,c,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.method,c=t.headers,a=t.formData,e.next=3,fetch(n,{method:r,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:c,redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(a)}).then((function(e){return _(e)})).catch((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y,N=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t,n){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:n,redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return _(e)})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w="https://norma.nomoreparties.space/api/auth/user",k=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:"https://norma.nomoreparties.space/api/auth/login",method:"POST",headers:{"Content-Type":"application/json"},formData:t},e.next=3,v(n).then((function(e){return O("refreshToken",e.refreshToken),O("accessToken",e.accessToken),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:"https://norma.nomoreparties.space/api/auth/register",method:"POST",headers:{"Content-Type":"application/json"},formData:t},e.next=3,v(n).then((function(e){return O("refreshToken",e.refreshToken),O("accessToken",e.accessToken),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:"https://norma.nomoreparties.space/api/auth/token",method:"POST",headers:{"Content-Type":"application/json"},formData:{token:f("refreshToken")}},e.next=3,v(t).then((function(e){return O("refreshToken",e.refreshToken),O("accessToken",e.accessToken),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(w,{"Content-Type":"application/json",Authorization:f("accessToken")||""}).then(function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.success||"jwt expired"!==t.message){e.next=6;break}return e.next=3,C();case 3:return e.abrupt("return",N(w,{"Content-Type":"application/json",Authorization:f("accessToken")||""}).then((function(e){return e})));case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:w,method:"PATCH",headers:{"Content-Type":"application/json",Authorization:f("accessToken")||""},formData:t},e.next=3,v(n).then(function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.success||"jwt expired"!==t.message){e.next=5;break}return C(),e.abrupt("return",N(w,{"Content-Type":"application/json",Authorization:f("accessToken")||""}).then((function(e){return e})));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:"https://norma.nomoreparties.space/api/password-reset",method:"POST",headers:{"Content-Type":"application/json"},formData:t},e.next=3,v(n).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:"https://norma.nomoreparties.space/api/password-reset/reset",method:"POST",headers:{"Content-Type":"application/json"},formData:t},e.next=3,v(n).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:"https://norma.nomoreparties.space/api/auth/logout",method:"POST",headers:{"Content-Type":"application/json"},formData:{token:f("refreshToken")}},e.next=3,v(t).then((function(e){return x("refreshToken"),x("accessToken"),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(e){return{type:U,user:e.user,error:e.error}},M=function(){return{type:P}},U="SET_USER_REQUEST",F="CLEAR_USER",P="GET_USER_REQUEST",B=function(){return function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(M()),e.next=3,T();case 3:(n=e.sent).success?t(A({user:n.user})):t(A({error:n.message}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G=function(e){return function(){var t=Object(l.a)(Object(u.a)().mark((function t(n){var r;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(M()),t.next=3,S(e);case 3:(r=t.sent).success?n(A({user:r.user})):n(A({error:r.message}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(l.a)(Object(u.a)().mark((function t(n){var r;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(M()),t.next=3,k(e);case 3:(r=t.sent).success?n(A({user:r.user})):n(A({error:r.message}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},z=n(0),H=function(e){var t=e.error;return Object(z.jsx)("h1",{className:"text text_type_main-small mt-4 text_color_inactive",children:t})},L=m.c,W=function(){var e=Object(m.b)(),t=L((function(e){return e.user})),n=Object(r.useState)({email:"",password:""}),c=Object(b.a)(n,2),a=c[0],s=c[1],O=Object(r.useState)(!1),f=Object(b.a)(O,2),x=f[0],h=f[1],_=function(e){var t=e.target,n=t.name,r=t.value;s(Object(j.a)(Object(j.a)({},a),{},Object(d.a)({},n,r)))},v=Object(r.useCallback)(function(){var t=Object(l.a)(Object(u.a)().mark((function t(n){return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(q(a)),h(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[a]);return t.loaded?Object(z.jsx)("div",{className:"display_flex display_flex-center text_align_center vh-100",children:Object(z.jsxs)("form",{onSubmit:function(e){return v(e)},children:[Object(z.jsx)("h1",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),x&&t.error&&Object(z.jsx)(H,{error:t.error}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.Input,{type:"text",placeholder:"E-mail",onChange:function(e){return _(e)},value:a.email,name:"email",error:!1,errorText:"E-mail invalid",size:"default"})}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.PasswordInput,{onChange:function(e){return _(e)},value:a.password,name:"password"})}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.Button,{htmlType:"submit",type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(z.jsxs)("div",{className:"mt-20",children:[Object(z.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"," "]}),Object(z.jsx)("span",{children:Object(z.jsx)(i.b,{className:"text text_type_main-default text_color_inactive nav_link",to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(z.jsxs)("div",{className:"mt-4",children:[Object(z.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," "]}),Object(z.jsx)("span",{children:Object(z.jsx)(i.b,{className:"text text_type_main-default text_color_inactive nav_link",to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})})]})]})}):Object(z.jsx)(o.a,{to:"/"})},J=function(){var e=Object(m.b)(),t=Object(r.useState)(!1),n=Object(b.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)({name:"",email:"",password:""}),O=Object(b.a)(s,2),f=O[0],x=O[1],h=L((function(e){return e.user})),_=Object(r.useCallback)((function(t){t.preventDefault(),e(function(e){return function(){var t=Object(l.a)(Object(u.a)().mark((function t(n){var r;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(M()),t.next=3,E(e);case 3:(r=t.sent).success?n(A({user:r.user})):n(A({error:r.message}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(f)),a(!0)}),[f]),v=function(e){var t=e.target,n=t.name,r=t.value;x(Object(j.a)(Object(j.a)({},f),{},Object(d.a)({},n,r)))};return h.loaded?Object(z.jsx)("div",{className:"display_flex display_flex-center text_align_center vh-100",children:Object(z.jsxs)("form",{onSubmit:function(e){return _(e)},children:[Object(z.jsx)("h1",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),c&&h.error&&Object(z.jsx)(H,{error:h.error}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return v(e)},value:f.name,name:"name",size:"default"})}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.Input,{type:"text",placeholder:"E-mail",onChange:function(e){return v(e)},value:f.email,name:"email",size:"default"})}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.PasswordInput,{onChange:function(e){return v(e)},value:f.password,name:"password"})}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.Button,{htmlType:"submit",type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(z.jsxs)("div",{className:"mt-20",children:[Object(z.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," "]}),Object(z.jsx)("span",{children:Object(z.jsx)(i.b,{className:"text text_type_main-default text_color_inactive nav_link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})}):Object(z.jsx)(o.a,{to:"/"})},V=function(){var e=Object(o.g)(),t=Object(r.useState)(""),n=Object(b.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(),d=Object(b.a)(s,2),j=d[0],m=d[1],O=Object(r.useCallback)(function(){var t=Object(l.a)(Object(u.a)().mark((function t(n){var r;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,R({email:c});case 3:(r=t.sent).success?e.replace({pathname:"/reset-password",state:{from:"/forgot-password"}}):m(r.message);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[c]);return Object(z.jsx)("div",{className:"display_flex display_flex-center text_align_center vh-100",children:Object(z.jsxs)("form",{onSubmit:function(e){return O(e)},children:[Object(z.jsx)("h1",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),j&&Object(z.jsx)(H,{error:j}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.Input,{type:"text",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return a(e.target.value)},value:c,name:"e-mail",error:!1,size:"default"})}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.Button,{htmlType:"submit",type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(z.jsxs)("div",{className:"mt-20",children:[Object(z.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? "}),Object(z.jsx)("span",{children:Object(z.jsx)(i.b,{className:"text text_type_main-default text_color_inactive nav_link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})})},Q=function(){var e,t,n=Object(r.useState)({token:"",password:""}),c=Object(b.a)(n,2),a=c[0],s=c[1],m=Object(r.useState)(""),O=Object(b.a)(m,2),f=O[0],x=O[1],h=Object(o.g)(),_=function(e){var t=e.name,n=e.value;s(Object(j.a)(Object(j.a)({},a),{},Object(d.a)({},t,n)))},v=Object(r.useCallback)(function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,I(a);case 3:(n=e.sent).success?h.replace({pathname:"/login"}):x(n.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]);return"/forgot-password"===(null===(e=h.location)||void 0===e||null===(t=e.state)||void 0===t?void 0:t.from)?Object(z.jsx)("div",{className:"display_flex display_flex-center text_align_center vh-100",children:Object(z.jsxs)("form",{onSubmit:function(e){return v(e)},children:[Object(z.jsx)("h1",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),f&&Object(z.jsx)(H,{error:f}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.PasswordInput,{onChange:function(e){return _(e.target)},value:a.password,name:"password"})}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return _(e.target)},value:a.token,error:!1,name:"token",size:"default"})}),Object(z.jsx)("div",{className:"mt-6",children:Object(z.jsx)(p.Button,{htmlType:"button",type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(z.jsxs)("div",{className:"mt-20",children:[Object(z.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? "}),Object(z.jsx)("span",{children:Object(z.jsx)(i.b,{className:"text text_type_main-default text_color_inactive nav_link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})}):Object(z.jsx)(o.a,{to:{pathname:"/forgot-password"}})},X=n(40),Z=n.n(X),$=function(e){var t=e.className,n=e.active,r=e.path,c=e.text,a=e.children,s=e.exact;return Object(z.jsxs)(i.b,{exact:s,activeClassName:Z.a.active,className:"".concat(Z.a.a_href," ").concat(t," ").concat(n?Z.a.active:""),to:r,children:[a,Object(z.jsx)("span",{className:"".concat(Z.a.a_href_span),children:c})]})},K=n(111),Y=n.n(K),ee=function(e){var t=e.children,n=Object(o.g)(),c=Object(m.b)(),a=Object(r.useCallback)(Object(l.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:(n=e.sent).success?t({type:F}):t(A({error:n.message}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.replace({pathname:"/login"});case 2:case"end":return e.stop()}}),e)}))),[]);return Object(z.jsxs)("div",{className:"display_flex",children:[Object(z.jsxs)("div",{className:Y.a.width_30_percent,children:[Object(z.jsx)("div",{className:"pt-5 pb-5",children:Object(z.jsx)($,{text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",exact:!0,className:"text text_type_main-medium text_color_inactive text_decoration_none",path:"/profile"})}),Object(z.jsx)("div",{className:"pt-5 pb-5",children:Object(z.jsx)($,{text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",exact:!0,className:"text text_type_main-medium text_color_inactive text_decoration_none",path:"/profile/orders"})}),Object(z.jsx)("div",{className:"pt-5 pb-5 text text_type_main-medium text_color_inactive",children:Object(z.jsx)("div",{className:"text text_type_main-medium text_color_inactive text_decoration_none cursor_pointer",onClick:a,children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(z.jsx)("div",{className:"mt-20 text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(z.jsx)("div",{className:"mr-15 width_100_percent",children:t})]})},te=n(12),ne="SET_CURRENT_INGREDIENT",re=n(112),ce=n.n(re),ae=function(e){var t=e.onClose,n=e.children;return Object(z.jsx)("div",{onClick:t,className:"".concat(ce.a.modal_overlay," display_flex display_flex-center"),children:n})},se=n(113),ie=n.n(se),oe=function(e){var t=e.header,n=e.onClose,c=e.children,s=Object(r.useCallback)((function(e){n(e)}),[]);Object(r.useEffect)((function(){return document.addEventListener("keydown",s,!1),function(){document.removeEventListener("keydown",s,!1)}}),[]);var i=Object(r.useCallback)((function(e){(e.target===e.currentTarget||e.target.closest(".close-button")||"Escape"===e.key)&&n(e)}),[]);return Object(a.createPortal)(Object(z.jsx)(ae,{onClose:i,children:Object(z.jsxs)("div",{className:"".concat(ie.a.modal_container," pt-10 pl-10 pr-10 pb-15"),children:[Object(z.jsxs)("div",{className:"display_flex display_flex_space_between",children:[Object(z.jsx)("div",{className:"text text_type_main-large",children:t}),Object(z.jsx)("div",{className:"cursor_pointer close-button",onClick:i,children:Object(z.jsx)(p.CloseIcon,{type:"primary"})})]}),c]})}),document.body)},ue=function(e){var t=e.image_large,n=e.name,r=e.calories,c=e.proteins,a=e.fat,s=e.carbohydrates;return Object(z.jsxs)("div",{className:"text_align_center",children:[Object(z.jsx)("img",{src:t}),Object(z.jsx)("div",{"data-testid":"modal-current-ingredient-name",className:"text text_type_main-medium mt-4",children:n}),Object(z.jsxs)("div",{className:"display_flex display_flex-center text text_type_main-default text_color_inactive mt-8",children:[Object(z.jsxs)("div",{className:"pr-5",children:["\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b ",Object(z.jsx)("br",{})," ",r]}),Object(z.jsxs)("div",{className:"pr-5",children:["\u0411\u0435\u043b\u043a\u0438, \u0433 ",Object(z.jsx)("br",{})," ",c]}),Object(z.jsxs)("div",{className:"pr-5",children:["\u0416\u0438\u0440\u044b, \u0433 ",Object(z.jsx)("br",{})," ",a]}),Object(z.jsxs)("div",{className:"pr-5",children:["\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433 ",Object(z.jsx)("br",{})," ",s]})]})]})},le=function(){var e,t=Object(o.g)(),n=Object(m.b)(),c=Object(o.i)().params,a=Object(r.useState)(null===(e=t.location.state)||void 0===e?void 0:e.isModal),s=Object(b.a)(a,1)[0],i=L((function(e){return e.ingredients.items})),u=L((function(e){return e.ingredients.buns})),l=L((function(e){return e.currentIngredient})),d=Object(r.useCallback)((function(){t.replace({pathname:"/"})}),[]);return Object(r.useEffect)((function(){if(c.id){var e=[].concat(Object(te.a)(i),Object(te.a)(u)).find((function(e){return e._id===c.id}));e&&n({type:ne,item:e})}}),[i,u]),l?Object(z.jsx)("div",{children:s?Object(z.jsx)(oe,{onClose:d,header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(z.jsx)(ue,Object(j.a)({},l))}):Object(z.jsx)(ue,Object(j.a)({},l))}):null},de=function(){var e=L((function(e){return e.user})),t=Object(m.b)(),n=Object(r.useState)({name:!0,email:!0,password:!0}),c=Object(b.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(!1),o=Object(b.a)(i,2),O=o[0],f=o[1],x=Object(r.useRef)(null),h=Object(r.useRef)(null),_=Object(r.useRef)(null),v=Object(r.useState)({name:"",email:"",password:""}),g=Object(b.a)(v,2),y=g[0],N=g[1];Object(r.useEffect)((function(){N(Object(j.a)(Object(j.a)({},e.data),{},{password:""}))}),[e.data]);var w=function(e){var t=e.name,n=e.value;N(Object(j.a)(Object(j.a)({},y),{},Object(d.a)({},t,n))),f(!0)},k=function(e){var t=Object.entries(a).reduce((function(e,t){return e[t[0]]=!0,e}),{});t[e]=!1,s(t)};Object(r.useEffect)((function(){var e,t,n;a.name||(null===(e=x.current)||void 0===e||e.focus());a.email||(null===(t=h.current)||void 0===t||t.focus());a.password||(null===(n=_.current)||void 0===n||n.focus())}),[a]);var E=Object(r.useCallback)(Object(l.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(G(y)),f(!1);case 2:case"end":return e.stop()}}),e)}))),[y]),C=Object(r.useCallback)((function(){N(Object(j.a)(Object(j.a)({},e.data),{},{password:""})),f(!1)}),[]);return Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"mb-6",children:Object(z.jsx)(p.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return w(e.target)},icon:"EditIcon",value:y.name,name:"name",error:!1,ref:x,disabled:a.name,onIconClick:function(e){return k("name")},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(z.jsx)("div",{className:"mb-6",children:Object(z.jsx)(p.Input,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:function(e){return w(e.target)},icon:"EditIcon",value:y.email,name:"email",error:!1,ref:h,disabled:a.email,onIconClick:function(e){return k("email")},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(z.jsx)("div",{className:"mb-6",children:Object(z.jsx)(p.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return w(e.target)},icon:"EditIcon",value:y.password,name:"password",error:!1,ref:_,disabled:a.password,onIconClick:function(e){return k("password")},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(z.jsx)("div",{children:O&&Object(z.jsxs)("div",{children:[Object(z.jsx)(p.Button,{htmlType:"button",type:"primary",size:"medium",onClick:E,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(z.jsx)(p.Button,{htmlType:"reset",onClick:C,type:"secondary",size:"medium",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})})]})};!function(e){e.done="done",e.pending="pending",e.created="created"}(y||(y={}));var je=new Map([[y.done,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"],[y.pending,"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"],[y.created,"\u0421\u043e\u0437\u0434\u0430\u043d"]]);function be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return e.toString()})).filter(Boolean).join(" ");return r}var pe=n(79),me=n.n(pe),Oe=function(e){var t=e.imgUrl,n=e.text;return Object(z.jsx)("div",{children:Object(z.jsx)("div",{className:be(me.a.avatar,n?me.a.text_bg:""),style:{backgroundImage:n?"":"url(".concat(t,")")},children:n&&Object(z.jsx)("div",{className:"text text_type_main-default",children:n})})})},fe=n(56),xe=n.n(fe),he=function(e){var t=e.items,n=e.showCount,c=Object(r.useMemo)((function(){return t.length>n?Object(te.a)(t).splice(0,n+1).reverse():t}),[t.length,n]),a=Object(r.useMemo)((function(){return t.length-c.length}),[c.length,t.length]);return Object(z.jsxs)("div",{className:be("flex_direction_reverse",xe.a.avatars_list),children:[a>0&&Object(z.jsx)("div",{className:xe.a.avatar_container,children:Object(z.jsx)(Oe,{imgUrl:t[t.length-1].image_mobile,text:a>1?"+".concat(a.toString()):null})}),c.map((function(e,t){return Object(z.jsx)("div",{className:xe.a.avatar_container,children:Object(z.jsx)(Oe,{imgUrl:e.image_mobile})},"".concat(e._id).concat(t))}))]})},_e=function(e){var t=e.data;return Object(z.jsxs)("div",{className:"inline-flex text text_type_digits-default",children:[t,Object(z.jsx)("span",{className:"pl-2",children:Object(z.jsx)(p.CurrencyIcon,{type:"primary"})})]})},ve=function(e){var t=e.order,n=e.showStatus,c=void 0!==n&&n,a=e.openModal,s=Object(r.useCallback)((function(){a()}),[]),i=be("pt-2",t.status==y.done?"feed_state_active":"");return Object(z.jsxs)("div",{onClick:s,className:"constructor-element display_block mb-4 max-width-100 pb-6 pt-6",children:[Object(z.jsxs)("div",{className:"display_flex mb-6 display_flex_space_between",children:[Object(z.jsxs)("div",{className:"text text_type_digits-default",children:["#",t.number]}),Object(z.jsx)("div",{className:"text text_type_main-default text_color_inactive",children:t.howDaysAgo})]}),Object(z.jsxs)("div",{className:"pb-6",children:[Object(z.jsx)("div",{className:"text text_type_main-medium",children:t.name}),c&&Object(z.jsx)("div",{className:i,children:t.statusCaption})]}),Object(z.jsxs)("div",{className:"display_flex display_flex_space_between",children:[Object(z.jsx)(he,{items:t.ingredientsData,showCount:3}),Object(z.jsx)("div",{className:"text text_type_digits-default",children:Object(z.jsx)(_e,{data:t.totalPrice})})]})]})},ge="WS_FEED_CONNECTION_START",ye="WS_FEED_SEND_MESSAGE",Ne="WS_FEED_CONNECTION_SUCCESS",we="WS_FEED_CONNECTION_CLOSED",ke="WS_FEED_CONNECTION_ERROR",Ee="WS_FEED_GET_MESSAGE",Ce=function(e){return{type:ge,url:e}},Te=function(e){return{type:we,payload:e}},Se=n(114),Re=n(124),Ie=n(80),De=n(81),Ae=function(e){Object(Se.a)(n,e);var t=Object(Re.a)(n);function n(e){var r;return Object(De.a)(this,n),(r=t.call(this)).ingredientsData=[],r.ingredients=e.ingredients,r._id=e._id,r.status=e.status,r.number=e.number,r.createdAt=e.createdAt,r.updatedAt=e.updatedAt,r.name=e.name,r}return Object(Ie.a)(n,[{key:"totalPrice",get:function(){return this.ingredientsData.reduce((function(e,t){return e+=t.price}),0)}},{key:"statusCaption",get:function(){return je.get(this.status)}},{key:"createdAtDate",get:function(){return new Date(this.createdAt)}},{key:"howDaysAgo",get:function(){var e;return(null===(e=this.createdAtDate)||void 0===e?void 0:e.getHowMuchDaysAgo())||""}},{key:"setIngredients",value:function(e){var t=e.reduce((function(e,t){return e.set(t._id,t),e}),new Map);this.ingredientsData=this.ingredients.map((function(e){return t.get(e)})).filter((function(e){return!!e}))}}]),n}(Object(Ie.a)((function e(){Object(De.a)(this,e),this.ingredients=[],this._id=void 0,this.status=void 0,this.number=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.name=""}))),Me=function(e){var t=L((function(t){var n=[].concat(Object(te.a)(t.ingredients.items),Object(te.a)(t.ingredients.buns)),r=e(t);return{orders:r.orders.map((function(e){var t=new Ae(e);return t.setIngredients(n),t})),total:r.total,totalToday:r.totalToday}}));return{orders:t.orders,total:t.total,totalToday:t.totalToday}},Ue="wss://norma.nomoreparties.space/orders/all",Fe="wss://norma.nomoreparties.space/orders",Pe={wsInit:ge,onOpen:Ne,onMessage:Ee,onClose:we,onError:ke,wsSendMessage:ye},Be=n(115),Ge=n.n(Be),qe=function(){var e=Object(m.b)(),t=Object(o.h)(),n=Object(o.g)(),c=Me((function(e){return e.feed})),a=c.orders,s=(c.total,c.totalToday,Object(r.useMemo)((function(){return Object(te.a)(a).sort((function(e,t){return e.createdAt<t.createdAt?1:-1}))}),[a]));Object(r.useEffect)((function(){var t,n=null===(t=f("accessToken"))||void 0===t?void 0:t.replace("Bearer ","");return e(Ce("".concat(Fe,"?token=").concat(n))),function(){e(Te("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u043e\u043a\u0435\u0442\u043e\u043c \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"))}}),[]);var i=Object(r.useCallback)((function(e){n.push({pathname:"/profile/orders/".concat(e),state:{isModal:!0,from:t.pathname}})}),[a]);return Object(z.jsx)("div",{className:Ge.a.scroll_container,children:Object(z.jsx)("div",{className:"mr-2",children:null===s||void 0===s?void 0:s.map((function(e){return Object(z.jsx)("div",{children:Object(z.jsx)(ve,{order:e,showStatus:!0,openModal:function(){return i(e._id)}})},e._id)}))})})},ze=n(239),He=function(e){var t=e.caption,n=e.items,r=e.className,c=void 0===r?"":r,a=e.itemCountInRow,s=void 0===a?10:a,i=be("mb-2",c),o=Math.ceil(n.length/s);return Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"text text_type_main-medium mb-6",children:t}),Object(z.jsx)("div",{className:"text text_type_digits-default display_flex flex-wrap",children:Array.from(Array(o).keys()).map((function(e,t){var r=t*s,c=t<o?(t+1)*s:n.length+1,a=n.slice(r,c);return Object(z.jsx)("div",{className:"mr-4 mb-4",children:a.map((function(e){return Object(z.jsx)("div",{className:i,children:e},e)}))},e)}))})]})},Le=function(e){var t=e.caption,n=e.count;return Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"text text_type_main-medium",children:t}),Object(z.jsx)("div",{className:"text text_type_digits-large",children:n})]})};Date.prototype.getHowMuchDaysAgo=function(){var e,t,n=new Date,r=Math.round((n.getTime()-this.getTime())/864e5),c="";switch(r){case 0:c="\u0421\u0435\u0433\u043e\u0434\u043d\u044f";break;case 1:c="\u0412\u0447\u0435\u0440\u0430";break;case 2:c="\u041f\u043e\u0437\u0430\u0432\u0447\u0435\u0440\u0430";break;default:c="".concat(r," ").concat((e=r,"\u0434\u0435\u043d\u044c"===(t="\u0434\u0435\u043d\u044c")?e>=10&&e<=20||e%10==0||e%10>=5?"\u0434\u043d\u0435\u0439":e%10==1?"\u0434\u0435\u043d\u044c":"\u0434\u043d\u044f":t)," \u043d\u0430\u0437\u0430\u0434")}var a=("0"+this.getHours()).slice(-2)+":"+("0"+this.getMinutes()).slice(-2);return c="".concat(c,", ").concat(a)};var We=n(82),Je=n.n(We),Ve=function(){var e=Object(o.g)(),t=Object(o.h)(),n=Object(m.b)(),c=Me((function(e){return e.feed})),a=c.orders,s=c.total,i=c.totalToday,u=Object(r.useMemo)((function(){return a.filter((function(e){return e.status===y.done})).map((function(e){return e.number.toString()}))}),[a]),l=Object(r.useMemo)((function(){return a.filter((function(e){return e.status===y.pending})).map((function(e){return e.number.toString()}))}),[a]);Object(r.useEffect)((function(){return n(Ce(Ue)),function(){n(Te("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u043e\u043a\u0435\u0442\u043e\u043c \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"))}}),[]);var d=Object(r.useCallback)((function(n){e.push({pathname:"/feed/".concat(n),state:{isModal:!0,from:t.pathname}})}),[a]);return Object(z.jsxs)("main",{className:"display_flex",children:[Object(z.jsxs)("div",{className:be("width_50_percent",Je.a.scroll_container),children:[Object(z.jsx)("div",{className:"text text_type_main-large mb-6",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(z.jsx)("div",{className:"pr-4",children:a.map((function(e){return Object(z.jsx)("div",{children:Object(z.jsx)(ve,{order:e,openModal:function(){return d(e._id)}})},Object(ze.a)())}))})]}),Object(z.jsx)("div",{className:be("width_50_percent",Je.a.scroll_container),children:Object(z.jsxs)("div",{className:"mt-25 ml-10",children:[Object(z.jsxs)("div",{className:"display_flex",children:[Object(z.jsx)("div",{className:"width_50_percent",children:Object(z.jsx)(He,{caption:"\u0413\u043e\u0442\u043e\u0432\u044b",items:u,className:"feed_state_active"})}),Object(z.jsx)("div",{children:Object(z.jsx)(He,{caption:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",items:l})})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"mb-15 mt-15",children:Object(z.jsx)(Le,{caption:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:",count:s})}),Object(z.jsx)("div",{className:"mb-15",children:Object(z.jsx)(Le,{caption:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:",count:i})})]})]})})]})},Qe=function(e){var t=e.text,n=e.price,r=e.thumbnail;return Object(z.jsxs)("div",{className:"constructor-element__row pt-4 pb-4",children:[Object(z.jsx)(Oe,{imgUrl:r}),Object(z.jsx)("span",{className:"constructor-element__text text text_type_main-default pl-4",children:t}),Object(z.jsxs)("span",{className:"constructor-element__price text text_type_digits-default",children:[n,Object(z.jsx)(p.CurrencyIcon,{type:"primary"})]})]})},Xe=n(116),Ze=n.n(Xe),$e=function(e){var t=e.order,n=be("mb-15","text text_type_main-default",t.status==y.done?"feed_state_active":""),c=Object(r.useRef)(null),a=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e;c.current&&(c.current.offsetHeight>=window.innerHeight-220-((null===(e=a.current)||void 0===e?void 0:e.offsetHeight)||0)?c.current.setAttribute("style","height: 400px; padding-right:10px"):c.current.removeAttribute("style"))}),[]),Object(z.jsxs)("div",{children:[Object(z.jsxs)("div",{ref:a,children:[Object(z.jsxs)("div",{className:"text text_type_digits-default mb-10 text_align_center",children:["#",t.number]}),Object(z.jsx)("div",{className:"text text_type_main-medium mb-3",children:t.name}),Object(z.jsx)("div",{className:n,children:t.statusCaption}),Object(z.jsx)("div",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"})]}),Object(z.jsx)("div",{ref:c,className:Ze.a.scroll_container,children:t.ingredientsData.map((function(e,t){return Object(z.jsx)("div",{children:Object(z.jsx)(Qe,{text:e.name,price:e.price,thumbnail:e.image_mobile})},"".concat(e._id).concat(t))}))}),Object(z.jsxs)("div",{className:"display_flex display_flex_space_between mt-10",children:[Object(z.jsx)("div",{className:"text text_type_main-default text_color_inactive",children:t.howDaysAgo}),Object(z.jsx)(_e,{data:t.totalPrice})]})]})},Ke=n(117),Ye=n.n(Ke),et=function(){var e,t,n=Object(o.g)(),c=Object(m.b)(),a=Object(r.useState)(),s=Object(b.a)(a,2),i=s[0],u=s[1],l=Object(o.i)().params,d=Object(r.useState)(null===(e=n.location.state)||void 0===e?void 0:e.isModal),j=Object(b.a)(d,1)[0],p=Object(r.useState)(null===(t=n.location.state)||void 0===t?void 0:t.from),O=Object(b.a)(p,1)[0],x=Object(r.useCallback)((function(){n.replace({pathname:O})}),[O,j]),h=L((function(e){return e.feed})),_=L((function(e){return[].concat(Object(te.a)(e.ingredients.buns),Object(te.a)(e.ingredients.items))}));return Object(r.useEffect)((function(){if(!h.connected){var e=(O||n.location.pathname).slice(1).split("/")[0],t=Ue;if("profile"==e){var r,a=null===(r=f("accessToken"))||void 0===r?void 0:r.replace("Bearer ","");t="".concat(Fe,"?token=").concat(a)}c(Ce(t))}}),[h.connected]),Object(r.useEffect)((function(){if(h.connected){var e=h.orders.find((function(e){return e._id===l.id}));if(e){var t=new Ae(e);t.setIngredients(_),u(t)}}}),[h.connected,h.orders]),i?Object(z.jsx)("div",{children:j?Object(z.jsx)(oe,{onClose:x,children:Object(z.jsx)($e,{order:i})}):Object(z.jsx)("div",{className:"display_flex display_flex-center",children:Object(z.jsx)("div",{className:Ye.a.feed_details_container,children:Object(z.jsx)($e,{order:i})})})}):null},tt=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:"https://norma.nomoreparties.space/api/orders",method:"POST",headers:{"Content-Type":"application/json",Authorization:f("accessToken")||""},formData:{ingredients:t}},e.next=3,v(n).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt="GET_INGREDIENTS_REQUEST",rt="GET_INGREDIENTS_SUCCESS",ct="GET_INGREDIENTS_FAILED",at=function(){return function(e){e({type:nt}),fetch("https://norma.nomoreparties.space/api/ingredients").then((function(e){return _(e)})).then((function(t){var n;e((n=t.data,{type:rt,ingredients:n}))})).catch((function(t){e({type:ct})}))}},st=n(236),it=n(123),ot=n(237),ut="ADD_BURGER_INGREDIENT_TO_CONSTRUCTOR",lt="UPDATE_BURGER_BUN_IN_CONSTRUCTOR",dt="REMOVE_BURGER_INGREDIENT_FROM_CONSTRUCTOR",jt="CLEAR_BURGER_INGREDIENTS_FROM_CONSTRUCTOR",bt="SET_ORDER_BURGER_INGREDIENTS",pt="SET_ORDER_REQUEST",mt="SET_ORDER_SUCCESS",Ot="SET_INGREDIENTS_FAILED",ft=function(e){return function(t){t(_t()),tt(e).then((function(e){var n;t(xt(e.name,null===(n=e.order)||void 0===n?void 0:n.number))})).catch((function(e){t(ht())}))}},xt=function(e,t){return{type:mt,name:e,orderNumber:t}},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a";return{type:Ot,message:e}},_t=function(){return{type:pt}},vt=n(238),gt=function(e){var t=e.name,n=e.price,c=e.item_key,a=e.image_mobile,s=e.type,i=void 0===s?void 0:s,o=e.draggable,u=e.index,l=e.moveItem,d=Object(m.b)(),j=Object(r.useRef)(null),O=Object(ot.a)({accept:"burgerIngredientItem",hover:function(e,t){if(j.current){var n=e.index,r=u;n!==r&&l&&r&&(l(n,r),e.index=r)}}}),f=Object(b.a)(O,2)[1],x=Object(vt.a)({type:"burgerIngredientItem",item:function(){return{item_key:c,index:u}},collect:function(e){return{isDragging:e.isDragging()}}}),h=Object(b.a)(x,2);h[0].isDragging;return(0,h[1])(f(j)),Object(z.jsxs)("div",{ref:o?j:null,className:"mt-4 mb-4",style:{display:"flex",alignItems:"center",gap:10},children:[o?Object(z.jsx)(p.DragIcon,{type:"primary"}):Object(z.jsx)("span",{className:"mr-6"}),Object(z.jsx)(p.ConstructorElement,{type:i,text:t,price:n,thumbnail:a,handleClose:function(){d(function(e){return{type:dt,key:e}}(c))}})]})},yt=n.p+"static/media/done.fd977731.svg",Nt=function(){var e=L((function(e){return e.order}));return Object(z.jsxs)("div",{className:"text_align_center","data-testid":"order-number",children:[!e.orderRequestFailed&&!e.orderRequest&&Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"text text_type_digits-large",children:e.orderNumber}),Object(z.jsx)("div",{className:"pt-8 text text_type_main-medium",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(z.jsx)("div",{className:"pt-15",children:Object(z.jsx)("img",{src:yt})}),Object(z.jsx)("div",{className:"pt-15 text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(z.jsx)("div",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]}),1==e.orderRequestFailed&&Object(z.jsx)("div",{children:e.errorMessage}),1==e.orderRequest&&Object(z.jsx)("div",{children:Object(z.jsx)("div",{className:"pt-8 text text_type_main-medium pb-8",children:"\u0417\u0430\u043a\u0430\u0437 \u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442\u0441\u044f..."})})]})},wt=n(119),kt=n.n(wt),Et=function(){var e=L((function(e){return[e.burgerConstructorIngredients.bun,e.burgerConstructorIngredients.bun]})),t=Object(b.a)(e,2),n=t[0],c=t[1],a=L((function(e){return e.ingredients.buns})),s=L((function(e){return e.ingredients.items})),i=L((function(e){return e.burgerConstructorIngredients.items})),d=L((function(e){return e.user})),O=L((function(e){return e.order}));Object(r.useEffect)((function(){d.loaded||f(B())}),[d.loaded]);var f=Object(m.b)(),x=Object(r.useState)(!1),h=Object(b.a)(x,2),_=h[0],v=h[1],g=Object(o.g)(),y=Object(ot.a)({accept:"ingredient",drop:function(e){var t=s.find((function(t){return t._id===e.id}));t&&f(function(e,t){return{type:ut,item:Object(j.a)(Object(j.a)({},e),{},{key:t})}}(t,Object(ze.a)()));var n=a.find((function(t){return t._id===e.id}));n&&f(function(e){return{type:lt,currentBun:e}}(n))}}),N=Object(b.a)(y,2)[1],w=Object(r.useCallback)(Object(l.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.loaded||!d.data){e.next=13;break}if(!n||!c){e.next=8;break}return t=[n._id].concat(Object(te.a)(i.map((function(e){return e._id}))),[c._id]),e.next=5,f(ft(t));case 5:v(!0),e.next=11;break;case 8:return e.next=10,f(ht("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u0443\u043b\u043a\u0438 \u0432 \u0431\u0443\u0440\u0433\u0435\u0440"));case 10:v(!0);case 11:e.next=14;break;case 13:g.replace({pathname:"/login"});case 14:case"end":return e.stop()}}),e)}))),[i,n,c,d]),k=Object(r.useCallback)((function(){v(!1),O.orderNumber&&f({type:jt})}),[O.orderNumber]),E=Object(r.useMemo)((function(){var e=0;return n&&c&&(e=n.price+c.price),e+i.reduce((function(e,t){return e+t.price}),0)}),[i,n,c]),C=Object(r.useCallback)((function(e,t){f(function(e,t){return{type:bt,dropIndex:e,dragIndex:t}}(t,e))}),[]);return Object(z.jsxs)("div",{ref:N,"data-testid":"drop-area",children:[Object(z.jsxs)("div",{className:kt.a.scroll_container,children:[n&&Object(z.jsx)(gt,{item_key:"bunTop",draggable:!1,name:n.name,price:n.price,type:"top",image_mobile:n.image_mobile},"bunTop"),i.map((function(e,t){return Object(z.jsx)(gt,{item_key:e.key||t.toString(),draggable:!0,name:e.name,price:e.price,index:t,image_mobile:e.image_mobile,moveItem:C},e.key)})),c&&Object(z.jsx)(gt,{item_key:"bunBottom",draggable:!1,name:c.name,price:c.price,type:"bottom",image_mobile:c.image_mobile},"bunBottom")]}),Object(z.jsxs)("div",{className:"mt-10 text-align-right total_price_container display_flex display_flex-center",children:[Object(z.jsx)("div",{className:"mr-10 text text_type_digits-medium",children:Object(z.jsx)(_e,{data:E})}),Object(z.jsx)(p.Button,{htmlType:"button",onClick:w,type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),_&&Object(z.jsx)(oe,{header:"",onClose:k,children:Object(z.jsx)(Nt,{})})]})},Ct=function(e){var t=e.count,n=e.imgSrc,r=e.description,c=e.caption,a=e.handleOpenModal,s=e.id,i=Object(vt.a)({type:"ingredient",item:{id:s}}),o=Object(b.a)(i,2)[1];return Object(z.jsxs)("div",{draggable:!0,ref:o,className:"mb-8 position_relative",onClick:a,"data-testid":"draggable-item",children:[t>0&&Object(z.jsx)(p.Counter,{count:t,size:"default"}),Object(z.jsx)("div",{className:"text_align_center pl-4 pr-4",children:Object(z.jsx)("img",{src:n,alt:""})}),Object(z.jsx)("div",{className:"text text_type_digits-default pt-1 pb-1 text_align_center",children:Object(z.jsx)(_e,{data:r})}),Object(z.jsx)("div",{"data-testid":"current-ingredient-name",className:"text_align_center text text_type_main-default",children:c})]})},Tt=n(120),St=n.n(Tt),Rt=function(e){switch(e){case"bun":return"\u0411\u0443\u043b\u043a\u0438";case"main":return"\u041d\u0430\u0447\u0438\u043d\u043a\u0438";case"sauce":return"\u0421\u043e\u0443\u0441\u044b"}},It=function(){var e=Object(r.useState)("bun"),t=Object(b.a)(e,2),n=t[0],c=t[1],a=L((function(e){return e.ingredients.buns})),s=L((function(e){return e.ingredients.items})),i=L((function(e){var t=Object(te.a)(e.burgerConstructorIngredients.items);return e.burgerConstructorIngredients.bun&&(t.push(e.burgerConstructorIngredients.bun),t.push(e.burgerConstructorIngredients.bun)),t.reduce((function(e,t){return e[t._id]?e[t._id]++:e[t._id]=1,e}),{})})),u=Object(m.b)(),l=Object(o.g)(),d=Object(r.useCallback)((function(e){l.push({pathname:"/ingredients/".concat(e._id),state:{isModal:!0}})}),[u]),j=Object(r.useMemo)((function(){var e=[].concat(Object(te.a)(a),Object(te.a)(s)).reduce((function(e,t){return e[t.type].push(t),e}),{bun:[],sauce:[],main:[]});return e}),[a,s]),O=Object(r.useCallback)((function(e){var t=e.target.scrollTop,n={minHeight:0,maxHeight:f.current.clientHeight};Object.keys(j).every((function(e){if(n.minHeight<=t&&n.maxHeight>=t)return c(e),!1;var r=_(e);return n.minHeight+=r.current.clientHeight,n.maxHeight+=r.current.clientHeight,!0}))}),[]),f=Object(r.useRef)(null),x=Object(r.useRef)(null),h=Object(r.useRef)(null),_=function(e){switch(e){case"bun":default:return f;case"main":return x;case"sauce":return h}},v=function(e,t){var n;c(t),null===(n=e.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})};return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{className:"text text_type_main-large mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(z.jsxs)("div",{className:"tabs",style:{display:"flex"},children:[Object(z.jsx)(p.Tab,{value:"bun",active:"bun"===n,onClick:function(){return v(f,"bun")},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(z.jsx)(p.Tab,{value:"sauce",active:"sauce"===n,onClick:function(){return v(h,"sauce")},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(z.jsx)(p.Tab,{value:"main",active:"main"===n,onClick:function(){return v(x,"main")},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(z.jsx)("div",{className:St.a.scroll_container,onScroll:O,children:Object.entries(j).map((function(e){var t=Object(b.a)(e,2),n=t[0],r=t[1];return Object(z.jsxs)("div",{ref:_(n),children:[Object(z.jsx)("h2",{className:"pb-6 pt-10 text text_type_main-medium",children:Rt(n)}),Object(z.jsx)("div",{className:"display_flex flex-wrap pl-4 pr-4 pb-10",children:r.map((function(e,t){var n;return Object(z.jsx)("div",{style:{flex:1},children:Object(z.jsx)(Ct,{id:e._id,count:null!==(n=i[e._id])&&void 0!==n?n:0,handleOpenModal:function(){return d(e)},description:"20",imgSrc:e.image,caption:e.name})},e._id)}))})]},n)}))})]})},Dt=function(){return Object(z.jsx)("main",{className:"display_flex",children:Object(z.jsxs)(st.a,{backend:it.a,children:[Object(z.jsx)("div",{className:"width_50_percent",children:Object(z.jsx)(It,{})}),Object(z.jsx)("div",{className:"mt-25 ml-10",children:Object(z.jsx)(Et,{})})]})})};function At(){return Object(z.jsx)("header",{className:"pt-10 pb-10",children:Object(z.jsxs)("nav",{className:"display_flex display_flex_space_between",children:[Object(z.jsxs)("div",{children:[Object(z.jsx)($,{exact:!0,className:"p-5 mr-2 text text_type_main-default",path:"/",text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",children:Object(z.jsx)("span",{className:"mr-2",children:Object(z.jsx)(p.BurgerIcon,{type:"primary"})})}),Object(z.jsx)($,{exact:!0,className:"p-5 mr-2 text text_type_main-default",path:"/feed",text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",children:Object(z.jsx)("span",{className:"mr-2",children:Object(z.jsx)(p.ListIcon,{type:"primary"})})})]}),Object(z.jsx)(p.Logo,{}),Object(z.jsx)("div",{children:Object(z.jsx)($,{exact:!0,className:"p-5 mr-2 text text_type_main-default",path:"/profile",text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",children:Object(z.jsx)("span",{className:"mr-2",children:Object(z.jsx)(p.ProfileIcon,{type:"primary"})})})})]})})}var Mt=function(e){var t=e.text;return Object(z.jsx)("div",{children:t})},Ut=n(53),Ft=["children"],Pt=function(e){var t=e.children,n=Object(Ut.a)(e,Ft),c=Object(m.b)(),a=L((function(e){return e.user}));return Object(r.useEffect)((function(){a.loaded||c(B())}),[]),a.loaded?Object(z.jsx)(o.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){var n=e.location;return a.data?Object(z.jsx)(o.a,{to:{pathname:"/",state:{from:n}}}):t}})):null},Bt=["children"],Gt=function(e){var t=e.children,n=Object(Ut.a)(e,Bt),c=Object(m.b)(),a=L((function(e){return e.user}));return Object(r.useEffect)((function(){c(B())}),[]),a.loaded?Object(z.jsx)(o.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){var n=e.location;return a.data?t:Object(z.jsx)(o.a,{to:{pathname:"/login",state:{from:n}}})}})):Object(z.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."})};n(230);var qt=function(){var e=L((function(e){return e.ingredients})),t=e.ingredientsRequestFailed,n=e.ingredientsRequest,c=e.error,a=h();return Object(r.useEffect)((function(){a(at())}),[a]),Object(z.jsx)("div",{className:"App",children:Object(z.jsx)(i.a,{children:Object(z.jsxs)(o.d,{children:[Object(z.jsxs)(o.b,{path:"/",exact:!0,children:[Object(z.jsx)(At,{}),t?Object(z.jsx)(H,{error:c}):n?Object(z.jsx)(Mt,{text:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."}):Object(z.jsx)(Dt,{})]}),Object(z.jsxs)(o.b,{path:"/feed",exact:!0,children:[Object(z.jsx)(At,{}),Object(z.jsx)(Ve,{})]}),Object(z.jsxs)(o.b,{path:"/feed/:id",exact:!0,children:[Object(z.jsx)(At,{}),Object(z.jsx)(et,{})]}),Object(z.jsx)(Pt,{path:"/login",exact:!0,children:Object(z.jsx)(W,{})}),Object(z.jsx)(Pt,{path:"/register",exact:!0,children:Object(z.jsx)(J,{})}),Object(z.jsx)(Pt,{path:"/forgot-password",exact:!0,children:Object(z.jsx)(V,{})}),Object(z.jsx)(Pt,{path:"/reset-password",exact:!0,children:Object(z.jsx)(Q,{})}),Object(z.jsxs)(Gt,{path:"/profile",exact:!0,children:[Object(z.jsx)(At,{}),Object(z.jsx)(ee,{children:Object(z.jsx)(de,{})})]}),Object(z.jsxs)(Gt,{path:"/profile/orders",exact:!0,children:[Object(z.jsx)(At,{}),Object(z.jsx)(ee,{children:Object(z.jsx)(qe,{})})]}),Object(z.jsxs)(Gt,{path:"/profile/orders/:id",exact:!0,children:[Object(z.jsx)(At,{}),Object(z.jsx)(et,{})]}),Object(z.jsxs)(o.b,{path:"/ingredients/:id",exact:!0,children:[Object(z.jsx)(At,{}),Object(z.jsx)(le,{})]})]})})})},zt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,240)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},Ht=n(28),Lt=n(122);var Wt={items:[],buns:[],ingredientsRequest:!1,ingredientsRequestFailed:!1,error:""};var Jt={name:"",orderNumber:null,orderRequest:!1,orderRequestFailed:!1,errorMessage:null};var Vt={items:[],bun:null};var Qt={loaded:!1,data:null,error:null};var Xt={connected:!1,orders:[],total:null,totalToday:null,message:null};var Zt,$t=Object(Ht.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nt:return Object(j.a)(Object(j.a)({},e),{},{ingredientsRequest:!0,ingredientsRequestFailed:!1});case rt:return Object(j.a)(Object(j.a)({},e),{},{items:t.ingredients.filter((function(e){return"bun"!==e.type})),buns:t.ingredients.filter((function(e){return"bun"===e.type})),ingredientsRequest:!1,ingredientsRequestFailed:!1});case ct:return Object(j.a)(Object(j.a)({},e),{},{ingredientsRequest:!1,ingredientsRequestFailed:!0});default:return e}},burgerConstructorIngredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ut:return Object(j.a)(Object(j.a)({},e),{},{items:[].concat(Object(te.a)(e.items),[Object(j.a)({},t.item)])});case dt:return Object(j.a)(Object(j.a)({},e),{},{items:e.items.filter((function(e){return e.key!==t.key}))});case lt:return Object(j.a)(Object(j.a)({},e),{},{bun:Object(j.a)({},t.currentBun)});case bt:var n=e.items[t.dropIndex],r=e.items[t.dragIndex],c=Object(te.a)(e.items);return c[t.dropIndex]=r,c[t.dragIndex]=n,Object(j.a)(Object(j.a)({},e),{},{items:c});case jt:return Object(j.a)({},Vt);default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:return Object(j.a)(Object(j.a)({},e),{},{orderRequest:!0,orderRequestFailed:!1});case mt:return Object(j.a)(Object(j.a)({},e),{},{name:t.name,orderNumber:t.orderNumber,orderRequest:!1,orderRequestFailed:!1});case Ot:return Object(j.a)(Object(j.a)({},e),{},{orderRequest:!1,orderRequestFailed:!0,errorMessage:t.message});default:return e}},currentIngredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===ne?t.item?Object(j.a)(Object(j.a)({},e),t.item):null:e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(j.a)(Object(j.a)({},e),{},{data:t.user?Object(j.a)({},t.user):null,loaded:!0,error:t.error||null});case P:return Object(j.a)(Object(j.a)({},e),{},{error:null});case F:return Object(j.a)({},Qt);default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WS_FEED_CONNECTION_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{connected:!0});case"WS_FEED_GET_MESSAGE":return Object(j.a)(Object(j.a)({},e),{},{orders:Object(te.a)(t.payload.orders),total:t.payload.total,totalToday:t.payload.totalToday});case"WS_FEED_CONNECTION_CLOSED":return Object(j.a)(Object(j.a)({},e),{},{message:t.payload,connected:!1});case"WS_FEED_CONNECTION_ERROR":return Object(j.a)(Object(j.a)({},e),{},{message:"\u043e\u0448\u0438\u0431\u043a\u0430, \u0442\u0438\u043f \u0441\u043e\u0431\u044b\u0442\u0438\u044f ".concat(t.payload.type)});default:return e}}}),Kt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ht.c,Yt=Object(Ht.d)($t,Kt(Object(Ht.a)(Lt.a,(Zt=Pe,function(e){var t=null,n=!1,r=e.dispatch,c=(0,e.getState)().user;return function(e){return function(a){var s=a.type;if(s===Zt.wsInit){var i=a.url;t=new WebSocket(i)}if(t){if(t.onopen=function(e){r({type:Ne}),n=!0},t.onerror=function(e){r({type:ke,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);n.success?r(function(e){return{type:Ee,payload:e}}(n)):r(Te(n.message))},t.onclose=function(e){var c;n?r(Te(e.reason)):console.log("ws with url=".concat(null===(c=t)||void 0===c?void 0:c.url," is closed"))},s===ye){var o=Object(j.a)(Object(j.a)({},a.payload),{},{token:c.data});t.send(JSON.stringify(o))}s===we&&(t.close(),n=!1)}e(a)}}}))));s.a.render(Object(z.jsx)(c.a.StrictMode,{children:Object(z.jsx)(m.a,{store:Yt,children:Object(z.jsx)(qt,{})})}),document.getElementById("root")),zt()},40:function(e,t,n){e.exports={a_href_span:"app-nav-item_a_href_span__3Xrjo",a_href:"app-nav-item_a_href__WWws3",active:"app-nav-item_active__1LbtB"}},56:function(e,t,n){e.exports={avatars_list:"app-avatar-list_avatars_list__Rvt7K",avatar_container:"app-avatar-list_avatar_container__3H9NR"}},79:function(e,t,n){e.exports={avatar:"app-avatar_avatar__2PZ1q",text_bg:"app-avatar_text_bg__1qcV5"}},82:function(e,t,n){e.exports={scroll_container:"feed_scroll_container__1A7s_"}}},[[231,1,2]]]);
//# sourceMappingURL=main.6364c370.chunk.js.map